(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"0py1":function(t,e,a){},"1xb6":function(t,e,a){"use strict";var i=a("YNnd");a.n(i).a},"7eI5":function(t,e,a){},"89bo":function(t,e,a){"use strict";var i=a("ovKT");a.n(i).a},"8Vg0":function(t,e,a){"use strict";var i=a("tKpc");a.n(i).a},"9gQr":function(t,e,a){},"A0++":function(t,e,a){"use strict";var i=a("xUNX");a.n(i).a},Af8c:function(t,e,a){},DIdw:function(t,e,a){},DiuX:function(t,e,a){"use strict";var i=a("uhPh");a.n(i).a},"Dk/J":function(t,e,a){"use strict";var i=a("UO/D");a.n(i).a},DrTf:function(t,e,a){"use strict";var i=a("HQIl");a.n(i).a},EDYk:function(t,e,a){},GgLw:function(t,e,a){"use strict";var i=a("7eI5");a.n(i).a},H9ya:function(t,e,a){"use strict";var i=a("DIdw");a.n(i).a},HQIl:function(t,e,a){},Hkxj:function(t,e,a){},JBGY:function(t,e,a){},JBVa:function(t,e,a){"use strict";var i=a("Rs8r");a.n(i).a},LsVI:function(t,e,a){"use strict";var i=a("Q+C1");a.n(i).a},NDUg:function(t,e,a){"use strict";var i=a("V0Qh");a.n(i).a},NOxg:function(t,e,a){"use strict";var i=a("v4Th");a.n(i).a},Pr1N:function(t,e,a){"use strict";var i=a("EDYk");a.n(i).a},"Q+C1":function(t,e,a){},RSqK:function(t,e,a){"use strict";var i=a("i7fK");a.n(i).a},Rs8r:function(t,e,a){},"UO/D":function(t,e,a){},UywT:function(t,e,a){"use strict";var i=a("qWpc");a.n(i).a},V0Qh:function(t,e,a){},Vtdi:function(t,e,a){"use strict";a.r(e);var i=a("Kw5r"),s=a("L2JU"),n=a("14Xm"),r=a.n(n),o=a("D3Ub"),l=a.n(o),c=a("zuR4"),d={name:"githubConner"},u=(a("RSqK"),a("KHd+")),p=Object(u.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"github-corner",attrs:{href:"https://github.com/NolanGit/PersonalHomepage",target:"_blank","aria-label":"View source on GitHub"}},[e("svg",{staticStyle:{fill:"#409EFF",color:"#fff",position:"absolute",top:"0",border:"0",left:"0",transform:"scale(-1, 1)","z-index":"1"},attrs:{width:"60",height:"60",viewBox:"0 0 250 250","aria-hidden":"true"}},[e("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),this._v(" "),e("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),this._v(" "),e("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},[],!1,null,null,null);p.options.__file="GithubConner.vue";var m=p.exports,v=a("oNX8").a,g=(a("UywT"),Object(u.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[t._m(0),t._v(" "),a("div",[a("el-autocomplete",{ref:"input",staticClass:"search-input",attrs:{placeholder:"请输入内容","fetch-suggestions":t.autoComplete},on:{select:function(e){return t.search()}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.word,callback:function(e){t.word=e},expression:"word"}},[a("el-select",{staticClass:"search-engine-select",attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.searchEnginesChanged},slot:"prepend",model:{value:t.searchEngines.select,callback:function(e){t.$set(t.searchEngines,"select",e)},expression:"searchEngines.select"}},t._l(t.searchEngines.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))])])}),1),t._v(" "),a("el-button",{staticClass:"search-button",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.search()}},slot:"append"})],1)],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search-icon-div"},[e("i",{staticClass:"search-icon el-icon-search"})])}],!1,null,"4ac49a35",null));g.options.__file="Search.vue";var h=g.exports,f=a("gDS+"),_=a.n(f),b=a("gjeX"),w=a.n(b),y="/privilege/userGet",x="/privilege/roleGet",k="/privilege/userRoleChange",C="/login/userLogin",D="/login/userLoginSalt",S="/login/userChangePassword",$="/login/userAdd",E={name:"PrivilegeEditUser",props:{user_id:Number,login_name:String,action:String},data:function(){return{username:"",password:"",passwordNew:"",isCheckedPass:!1,role_id:"",roleData:[]}},methods:{md5It:function(t){return t=w()(t)},randomString:function(t){t=t||32;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=e.length,i="",s=0;s<t;s++)i+=e.charAt(Math.floor(Math.random()*a));return i},userGetFront:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(y,{user_id:t.user_id});case 3:a=e.sent,i=a.data,t.userData=i.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},roleGetFront:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(x,{current_page:null,pagination_size:null});case 3:for(a=e.sent,i=a.data,s=0;s<i.data.list.length;s++)1==i.data.list[s].is_valid&&t.roleData.push({label:i.data.list[s].name,value:i.data.list[s].id});e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},checkPass:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.password&&void 0!==t.password&&0!=t.password.length){e.next=4;break}t.$message({message:"请填写密码",type:"error"}),e.next=22;break;case 4:return e.prev=4,e.next=7,c.a.post(D,{login_name:t.login_name});case 7:return a=e.sent,i=a.data,s={login_name:t.login_name,password:t.md5It(t.md5It(t.md5It(t.password)+i.data.stable_salt)+i.data.salt),is_generate_cookie:!1},e.next=12,c.a.post(C,s);case 12:n=e.sent,o=n.data,t.$message({message:o.msg,type:"success"}),t.isCheckedPass=!0,e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 22:case"end":return e.stop()}},e,t,[[4,18]])}))()},changePass:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.randomString(40),i={login_name:t.login_name,stable_salt:a,password:t.md5It(t.md5It(t.passwordNew)+a)},e.prev=2,e.next=5,c.a.post(S,i);case 5:s=e.sent,n=s.data,t.$message({message:n.msg,type:"success"}),t.passwordNew="",e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:case"end":return e.stop()}},e,t,[[2,11]])}))()},changeRole:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(k,{role_id:t.role_id,login_name:t.login_name});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.passwordNew="",e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},userAddFront:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.username&&void 0!==t.username&&0!=t.username.length&&""!==t.passwordNew&&void 0!==t.passwordNew&&0!=t.passwordNew.length&&""!=t.role_id){e.next=4;break}t.$message({message:"请将表单填写完整后提交",type:"error"}),e.next=19;break;case 4:return a=t.randomString(40),i={name:t.username,role_id:t.role_id,login_name:t.login_name,stable_salt:a,password:t.md5It(t.md5It(t.passwordNew)+a)},e.prev=6,e.next=9,c.a.post($,i);case 9:s=e.sent,n=s.data,t.$message({message:n.msg,type:"success"}),t.$emit("close"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 19:case"end":return e.stop()}},e,t,[[6,15]])}))()}},mounted:function(){this.isCheckedPass=!1,this.roleGetFront()}},z=(a("ZEOG"),Object(u.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},["edit"==t.action?a("div",[t.isCheckedPass?t._e():a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入原密码：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.checkPass()}}},[t._v("验证")])],1),t._v(" "),t.isCheckedPass?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入新密码：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:t.passwordNew,callback:function(e){t.passwordNew=e},expression:"passwordNew"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.changePass()}}},[t._v("提交")])],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请选择角色：")]),t._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:t.role_id,callback:function(e){t.role_id=e},expression:"role_id"}},t._l(t.roleData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.changeRole()}}},[t._v("提交")])],1)]):t._e()]):t._e(),t._v(" "),"new"==t.action?a("div",{staticClass:"margin_left-large"},[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入用户名称：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入用户登录名：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.login_name,callback:function(e){t.login_name=e},expression:"login_name"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入用户密码：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:t.passwordNew,callback:function(e){t.passwordNew=e},expression:"passwordNew"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请选择角色：")]),t._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:t.role_id,callback:function(e){t.role_id=e},expression:"role_id"}},t._l(t.roleData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.userAddFront()}}},[t._v("提交")])],1):t._e()])],1)},[],!1,null,"2c27009a",null));z.options.__file="PrivilegeEditUser.vue";var T=z.exports,N="/privilege/rolePrivilegeEdit",F="/privilege/roleEdit",M={name:"PrivilegeEditRole",props:{action:String,roleId:Number,roleName:String,roleRemark:String,privilegeData:Array,checkedPrivilege:Array},watch:{privilegeData:function(t,e){this.privilegeData=t},checkedPrivilege:function(t,e){this.checkedPrivilege=t},roleId:function(t,e){this.roleId=t},roleName:function(t,e){this.roleName=t},roleRemark:function(t,e){this.roleRemark=t}},data:function(){return{}},methods:{submit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("edit"!=t.action){e.next=30;break}t.checkedPrivilegeId=[],a=0;case 3:if(!(a<t.privilegeData.length)){e.next=15;break}i=0;case 5:if(!(i<t.checkedPrivilege.length)){e.next=12;break}if(t.privilegeData[a].label!=t.checkedPrivilege[i]){e.next=9;break}return t.checkedPrivilegeId.push(t.privilegeData[a].id),e.abrupt("continue",9);case 9:i++,e.next=5;break;case 12:a++,e.next=3;break;case 15:return e.prev=15,e.next=18,c.a.post(N,{role_id:t.roleId,checked_privilege_id:t.checkedPrivilegeId});case 18:s=e.sent,n=s.data,t.$message({message:n.msg,type:"success"}),t.$emit("close"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(15),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 28:e.next=44;break;case 30:if("new"!=t.action){e.next=44;break}return e.prev=31,e.next=34,c.a.post(F,{role_id:t.roleId,name:t.roleName,remark:t.roleRemark});case 34:o=e.sent,l=o.data,t.$message({message:l.msg,type:"success"}),t.$emit("close"),e.next=44;break;case 40:e.prev=40,e.t1=e.catch(31),console.log(e.t1),t.$message({message:e.t1.response.data.msg,type:"error"});case 44:case"end":return e.stop()}},e,t,[[15,24],[31,40]])}))()}},mounted:function(){console.log(this.checkedPrivilege)}},I=(a("zs3P"),Object(u.a)(M,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"scrollbar-div",staticStyle:{"max-height":"50vh"}},[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["edit"==t.action?a("div",[a("el-checkbox-group",{staticClass:"margin_bottom-large",model:{value:t.checkedPrivilege,callback:function(e){t.checkedPrivilege=e},expression:"checkedPrivilege"}},t._l(t.privilegeData,function(t){return a("el-checkbox",{key:t,staticStyle:{"min-width":"300px"},attrs:{label:t.label,value:t.id}})}),1)],1):t._e(),t._v(" "),"new"==t.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入角色名称：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入备注：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.roleRemark,callback:function(e){t.roleRemark=e},expression:"roleRemark"}})],1)]):t._e(),t._v(" "),a("el-button",{staticClass:"noMargin",staticStyle:{"margin-bottom":"50px"},attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)])],1)},[],!1,null,"18bbc1cc",null));I.options.__file="PrivilegeEditRole.vue";var O=I.exports,P="/privilege/privilegeEdit",L={name:"PrivilegeEditPrivilege",props:{action:String,privilegeId:Number,privilegeName:String,privilegeMark:String,privilegeRemark:String},watch:{privilegeId:function(t,e){this.privilegeId=t}},data:function(){return{}},methods:{submit:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!=t.action){e.next=14;break}return e.prev=1,e.next=4,c.a.post(P,{privilege_id:t.privilegeId,name:t.privilegeName,mark:t.privilegeMark,remark:t.privilegeRemark});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.$emit("close"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()}},mounted:function(){}},R=(a("NOxg"),Object(u.a)(L,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["new"==t.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入权限名称：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.privilegeName,callback:function(e){t.privilegeName=e},expression:"privilegeName"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入权限标识：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.privilegeMark,callback:function(e){t.privilegeMark=e},expression:"privilegeMark"}})],1),t._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入备注：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.privilegeRemark,callback:function(e){t.privilegeRemark=e},expression:"privilegeRemark"}})],1)]):t._e(),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)])],1)},[],!1,null,"614b5f22",null));R.options.__file="PrivilegeEditPrivilege.vue";var A="/privilege/userGet",G="/privilege/userDisable",W="/privilege/userEnable",B="/privilege/userDelete",V="/privilege/roleGet",j="/privilege/rolePrivilegeGet",U="/privilege/roleDisable",q="/privilege/roleEnable",H="/privilege/roleDelete",K="/privilege/privilegeGet",Y="/privilege/privilegeDisable",X="/privilege/privilegeEnable",J="/privilege/privilegeDelete",Z={name:"ConsolePrivilege",components:{PrivilegeEditUser:T,PrivilegeEditRole:O,PrivilegeEditPrivilege:R.exports},props:{user_id:Number,login_name:String},data:function(){return{activeSystem:"用户设置",userData:[],roleData:[],privilegeData:[],edit:{title:"编辑",visible:!1,type:""},pagination:{currentPage:1,pageSize:10,total:0}}},methods:{handleChange:function(){this.pagination={currentPage:1,pageSize:10,total:0},this.apiHelper()},apiHelper:function(){"用户设置"==this.activeSystem?(this.userData=[],this.userGet()):"角色对应权限设置"==this.activeSystem?(this.roleData=[],this.roleGet()):"权限设置"==this.activeSystem&&(this.privilegeData=[],this.privilegeGet())},paginationCurrentChange:function(t){this.pagination.currentPage=t,this.apiHelper()},paginationSizeChange:function(t){this.pagination.pageSize=t,this.apiHelper()},close:function(){this.edit.visible=!1,"user"==this.edit.type&&this.userGet(),"role"==this.edit.type&&this.roleGet(),"privilege"==this.edit.type&&this.privilegeGet()},userAdd:function(){this.edit.title="新增用户",this.edit.visible=!0,this.edit.type="user",this.edit.userEditAction="new"},userSetting:function(t){this.edit.login_name=t,this.edit.title="修改用户密码和角色",this.edit.visible=!0,this.edit.type="user",this.edit.userEditAction="edit"},userGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(A,{user_id:t.user_id,pagination_size:t.pagination.pageSize,current_page:t.pagination.currentPage});case 3:for(a=e.sent,i=a.data,t.pagination.total=i.data.total,s=0;s<i.data.list.length;s++)1==i.data.list[s].is_valid?i.data.list[s].is_disabled="否":i.data.list[s].is_disabled="是";t.userData=i.data.list,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},userDisable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(G,{user_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},userEnable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(W,{user_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},userDelete:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(B,{user_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()},roleAdd:function(){this.edit.roleEditRoleId=0,this.edit.roleEditName="",this.edit.roleEditRemark="",this.edit.roleEditAction="new",this.edit.title="新增角色",this.edit.visible=!0,this.edit.type="role"},roleEdit:function(t,e,a){this.edit.roleEditAction="new",this.edit.roleEditRoleId=t,this.edit.roleEditName=e,this.edit.roleEditRemark=a,this.edit.title="修改角色",this.edit.visible=!0,this.edit.type="role"},roleGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(V,{pagination_size:t.pagination.pageSize,current_page:t.pagination.currentPage});case 3:for(a=e.sent,i=a.data,t.pagination.total=i.data.total,s=0;s<i.data.list.length;s++)1==i.data.list[s].is_valid?i.data.list[s].is_disabled="否":i.data.list[s].is_disabled="是";t.roleData=i.data.list,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},roleSetting:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n,o,l,d;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(j,{role_id:t});case 3:for(i=a.sent,s=i.data,e.edit.checkedPrivilege=[],n=0;n<s.data.length;n++)e.edit.checkedPrivilege.push(s.data[n].privilege_name);return a.next=9,c.a.post(K,{pagination_size:null,current_page:null});case 9:for(o=a.sent,l=o.data,e.edit.privilegeData=[],d=0;d<l.data.list.length;d++)e.edit.privilegeData.push({id:l.data.list[d].id,label:l.data.list[d].name});e.edit.roleEditRoleId=t,e.edit.roleEditAction="edit",e.edit.title="修改角色对应权限",e.edit.type="role",e.edit.visible=!0,a.next=24;break;case 20:a.prev=20,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 24:case"end":return a.stop()}},a,e,[[0,20]])}))()},roleDisable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(U,{role_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},roleEnable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(q,{role_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},roleDelete:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(H,{role_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()},privilegeAdd:function(){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=0,this.edit.privilegeEditPrivilegeName="",this.edit.privilegeEditPrivilegeMark="",this.edit.privilegeEditPrivilegeRemark="",this.edit.title="新增权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeEditFront:function(t,e,a,i){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=t,this.edit.privilegeEditPrivilegeName=e,this.edit.privilegeEditPrivilegeMark=a,this.edit.privilegeEditPrivilegeRemark=i,this.edit.title="修改权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(K,{pagination_size:t.pagination.pageSize,current_page:t.pagination.currentPage});case 3:for(a=e.sent,i=a.data,t.privilegeData=[],t.pagination.total=i.data.total,s=0;s<i.data.list.length;s++)t.privilegeData.push({id:i.data.list[s].id,label:i.data.list[s].name,name:i.data.list[s].name,mark:i.data.list[s].mark,remark:i.data.list[s].remark,is_valid:i.data.list[s].is_valid,update_time:i.data.list[s].update_time,is_disabled:1==i.data.list[s].is_valid?"否":"是"});e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},privilegeDisable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Y,{privilege_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},privilegeEnable:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(X,{privilege_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},privilegeDelete:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(J,{privilege_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()}},mounted:function(){this.userGet()}},Q=(a("yJpf"),Object(u.a)(Z,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-card",{staticClass:"box-card"},[a("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeSystem,callback:function(e){t.activeSystem=e},expression:"activeSystem"}},[a("el-collapse-item",{attrs:{title:"用户设置",name:"用户设置"}},[a("div",{staticClass:"collapse-div"},[t._v("包括用户密码、角色的修改")])]),t._v(" "),a("el-collapse-item",{attrs:{title:"角色对应权限设置",name:"角色对应权限设置"}},[a("div",{staticClass:"collapse-div"},[t._v("包括角色的新增、角色对应权限的设置")])]),t._v(" "),a("el-collapse-item",{attrs:{title:"权限设置",name:"权限设置"}},[a("div",{staticClass:"collapse-div"},[t._v("包括权限的新增、修改和删除")])])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:19}},[a("el-card",{staticClass:"box-card"},["用户设置"==t.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.userAdd()}}},[t._v("新增用户")]),t._v(" "),a("el-table",{key:Math.random(),ref:"userTable",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.userData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",label:"姓名",width:"120"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"login_name",label:"登录名",width:"180"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"role_name",label:"角色",width:"120"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",label:"修改时间"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.is_valid,expression:"scope.row.is_valid == 1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.userDisable(e.row.id)}}},[t._v("禁用")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.userEnable(e.row.id)}}},[t._v("启用")]),t._v(" "),1==e.row.is_edit?a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.userSetting(e.row.login_name)}}},[t._v("修改")]):t._e(),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.userDelete(e.row.id)}}},[t._v("删除")])]}}],null,!1,1925252867)})],1),t._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":t.pagination.currentPage,"page-sizes":[5,10,20,30,100],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationCurrentChange}})],1):t._e(),t._v(" "),"角色对应权限设置"==t.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.roleAdd()}}},[t._v("新增角色")]),t._v(" "),a("el-table",{key:Math.random(),ref:"roleTable",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.roleData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",label:"名称",width:"180"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"remark",label:"备注",width:"180"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",label:"修改时间",width:"180"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.is_valid,expression:"scope.row.is_valid == 1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.roleDisable(e.row.id)}}},[t._v("禁用")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.roleEnable(e.row.id)}}},[t._v("启用")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.roleEdit(e.row.id,e.row.name,e.row.remark)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.roleSetting(e.row.id)}}},[t._v("配置对应权限")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.roleDelete(e.row.id)}}},[t._v("删除")])]}}],null,!1,2776492411)})],1),t._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":t.pagination.currentPage,"page-sizes":[5,10,20,30,100],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationCurrentChange}})],1):t._e(),t._v(" "),"权限设置"==t.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.privilegeAdd()}}},[t._v("新增权限")]),t._v(" "),a("el-table",{key:Math.random(),ref:"privilegeTable",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.privilegeData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",sortable:"",label:"名称",width:"220"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"mark",sortable:"",label:"标识",width:"200"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"remark",label:"备注",width:"170"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"70"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",sortable:"",label:"修改时间"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.is_valid,expression:"scope.row.is_valid == 1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.privilegeDisable(e.row.id)}}},[t._v("禁用")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.privilegeEnable(e.row.id)}}},[t._v("启用")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.privilegeEditFront(e.row.id,e.row.name,e.row.mark,e.row.remark)}}},[t._v("修改")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_valid,expression:"scope.row.is_valid == 0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.privilegeDelete(e.row.id)}}},[t._v("删除")])]}}],null,!1,1690902630)})],1),t._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":t.pagination.currentPage,"page-sizes":[10,20,30,100],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationCurrentChange}})],1):t._e()])],1),t._v(" "),a("el-drawer",{attrs:{title:t.edit.title,visible:t.edit.visible,size:"60%",direction:"btt"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},closed:t.editFormClosed}},["user"==t.edit.type&t.edit.visible?a("div",[a("PrivilegeEditUser",{attrs:{user_id:t.user_id,login_name:t.edit.login_name,action:t.edit.userEditAction},on:{close:function(e){return t.close()}}})],1):t._e(),t._v(" "),"role"==t.edit.type&t.edit.visible?a("div",[a("PrivilegeEditRole",{attrs:{action:t.edit.roleEditAction,checkedPrivilege:t.edit.checkedPrivilege,privilegeData:t.edit.privilegeData,roleId:t.edit.roleEditRoleId,roleName:t.edit.roleEditName,roleRemark:t.edit.roleEditRemark},on:{close:function(e){return t.close()}}})],1):t._e(),t._v(" "),"privilege"==t.edit.type&t.edit.visible?a("div",[a("PrivilegeEditPrivilege",{attrs:{action:t.edit.privilegeEditAction,privilegeId:t.edit.privilegeEditPrivilegeId,privilegeName:t.edit.privilegeEditPrivilegeName,privilegeMark:t.edit.privilegeEditPrivilegeMark,privilegeRemark:t.edit.privilegeEditPrivilegeRemark},on:{close:function(e){return t.close()}}})],1):t._e()])],1)],1)},[],!1,null,"3e279ea3",null));Q.options.__file="Privilege.vue";var tt=Q.exports,et="/script/subSystem",at="/script/subSystemAdd",it="/script/subSystemDelete",st={name:"ScriptColumn",props:{user_id:Number,formData:{default:[]}},data:function(){return{activeSystem:"",subSystem:[],subSystemName:""}},watch:{activeSystem:function(t,e){if(""!=t){for(var a=0;a<this.subSystem.length&&t!=this.subSystem[a].title;a++);this.$emit("subSystemClicked",this.subSystem[a].id)}}},methods:{newTab:function(){this.$emit("newTab")},scriptLabelClicked:function(t){this.$emit("scriptNameClicked",t)},subSystemGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(et,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.subSystem=[],s=0;s<i.data.length;s++)t.subSystem.push({id:i.data[s].id,title:i.data[s].name});e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},subSystemAdd:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(at,{sub_system_name:t.subSystemName,user_id:t.user_id});case 3:a=e.sent,a.data,t.subSystem=[],t.subSystemName="",t.subSystemGet(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},subSystemDelete:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=0;case 2:if(!(a<t.subSystem.length)){e.next=8;break}if(t.activeSystem!=t.subSystem[a].title){e.next=5;break}return e.abrupt("break",8);case 5:a++,e.next=2;break;case 8:return e.next=10,c.a.post(it,{sub_system_id:t.subSystem[a].id,user_id:t.user_id});case 10:i=e.sent,i.data,t.$message({message:"成功！",type:"success"}),t.subSystemGet(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 20:case"end":return e.stop()}},e,t,[[0,16]])})));case 1:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.subSystemGet()}},nt=(a("H9ya"),Object(u.a)(st,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"left-side-box-card"},[a("el-collapse",{attrs:{accordion:""},model:{value:t.activeSystem,callback:function(e){t.activeSystem=e},expression:"activeSystem"}},t._l(t.subSystem,function(e){return a("el-collapse-item",{key:e.key,attrs:{title:e.title,name:e.title}},[a("a",{staticClass:"better_font_style",staticStyle:{color:"#606266","font-size":"12px"}},[t._v("包括：")]),t._v(" "),t._l(t.formData,function(e){return a("div",{key:e.key,staticClass:"margin_left-medium"},[a("a",{staticClass:"better_font_style",staticStyle:{cursor:"pointer",color:"#409eff","font-size":"12px"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.scriptLabelClicked(e.id)}}},[t._v(t._s("- "+e.title))])])}),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:0==t.formData.length,expression:"formData.length == 0"}],staticClass:"collapse-div better_font_style",staticStyle:{color:"#606266","font-size":"12px"}},[t._v("本栏目暂无脚本")]),t._v(" "),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.formData.length,expression:"formData.length == 0"}],attrs:{type:"text",size:"small"},on:{click:t.newTab}},[t._v("需要新增？")]),t._v(" "),a("el-button",{staticClass:"noMargin",staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.subSystemDelete()}}},[t._v("删除栏目")])],1)],2)}),1),t._v(" "),a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini",placeholder:"请输入栏目名称"},model:{value:t.subSystemName,callback:function(e){t.subSystemName=e},expression:"subSystemName"}}),t._v(" "),a("el-button",{staticClass:"margin_top-mini",attrs:{size:"mini"},on:{click:t.subSystemAdd}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"margin_top-medium",attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v("新增栏目")])],1)],1)},[],!1,null,"499d68ec",null));nt.options.__file="ScriptColumn.vue";var rt,ot=nt.exports,lt=a("YEIV"),ct=a.n(lt),dt=a("H7qB"),ut="/script/delete",pt="/script/getLogs",mt="/script/schedule",vt="/script/scheduleEdit",gt="/script/scheduleDelete",ht=(rt={name:"ConsoleScriptButtons",components:{},props:{user_id:Number,singleForm:Array},watch:{},data:function(){return{schedule:{label:"新建定时任务",popoverVisible:!1,dialogVisible:!1,loading:!1,schedules:[],scheduleData:{schedule_id:0,triggerDate:"",triggerTime:"",is_automatic:!1,interval:{value:1,unit:{select:2,options:[{value:0,label:"分钟"},{value:1,label:"小时"},{value:2,label:"天"}]}}}},output:{canBeTerminate:!1,loading:!1,log_id:0,logs:[],visible:!1,text:"",important_fields:[],isAlert:!1}}}},ct()(rt,"watch",{}),ct()(rt,"methods",{singleDataReplay:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(pt,{script_id:t.singleForm.id,user_id:t.user_id,limit:1});case 3:for(a=e.sent,200!=(i=a.data).code&&t.$message({message:i.msg,type:"error"}),s=0;s<t.singleForm.formDataDetail.length;s++)for(n=0;n<i.data.logs[0].detail.length;n++)try{i.data.logs[0].detail[n].label==t.singleForm.formDataDetail[s].label&&(t.singleForm.formDataDetail[s].value=i.data.logs[0].detail[n].value)}catch(e){console.log("["+t.singleForm.formDataDetail[s].label+"]恢复失败："+e)}t.singleForm.version!=i.data.logs[0].version?t.$message({message:"检测到脚本配置发生过修改(V"+i.data.version+"→V"+t.singleForm.version+")，可能无法完美恢复上一次参数",type:"info"}):t.$message({message:"参数填充完毕",type:"success"}),t.$emit("replay",t.singleForm),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:case"end":return e.stop()}},e,t,[[0,11]])}))()},singleDataLog:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(pt,{script_id:t.singleForm.id,user_id:t.user_id,limit:1});case 3:a=e.sent,i=a.data,t.$emit("output",i.data.logs[0].output),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},singleDataShowLogs:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.output.loading=!0,t.output.logs=[],e.prev=2,e.next=5,c.a.post(pt,{script_id:t.singleForm.id,limit:50});case 5:if(a=e.sent,i=a.data,t.output.logs=i.data.logs,0!=t.output.logs){e.next=12;break}return t.$message({message:"未查到脚本运行日志",type:"error"}),t.output.loading=!1,e.abrupt("return");case 12:t.output.important_fields=i.data.important_fields,s=0;case 14:if(!(s<t.output.logs.length)){e.next=31;break}n=0;case 16:if(!(n<t.output.important_fields.length)){e.next=28;break}o=0;case 18:if(!(o<t.output.logs[s].detail.length)){e.next=25;break}if(t.output.logs[s].detail[o].label!=t.output.important_fields[n]){e.next=22;break}return"select"==t.output.logs[s].detail[o].type?t.output.logs[s][t.output.important_fields[n]]=t.output.logs[s].detail[o].optionLabel:t.output.logs[s][t.output.important_fields[n]]=t.output.logs[s].detail[o].value,e.abrupt("break",25);case 22:o++,e.next=18;break;case 25:n++,e.next=16;break;case 28:s++,e.next=14;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(2),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 37:t.output.loading=!1;case 38:case"end":return e.stop()}},e,t,[[2,33]])}))()},log_output:function(t){this.$emit("output",t)},log_replay:function(t,e){for(var a=0;a<this.singleForm.formDataDetail.length;a++)try{for(var i=0;i<e.length;i++)if(e[i].label==this.singleForm.formDataDetail[a].label){this.singleForm.formDataDetail[a].value=e[i].value;break}}catch(t){console.log("["+this.singleForm.formDataDetail[a].label+"]恢复失败："+t)}this.singleForm.version!=t?this.$message({message:"参数填充成功，但是检测到脚本配置发生过修改(V"+t+"→V"+this.singleForm.version+")，可能无法完美恢复上一次参数，请关闭列表弹出框后查看",type:"info",duration:4e3}):(this.$message({message:"参数填充成功，请关闭列表弹出框后点击提交按钮以运行",type:"success"}),this.$emit("replay",this.singleForm))},scheduleShow:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.schedule.loading=!0,t.schedule.schedules=[],e.prev=2,e.next=5,c.a.post(mt,{script_id:t.singleForm.id,user_id:t.user_id});case 5:a=e.sent,i=a.data,t.schedule.loading=!1,t.schedule.schedules=i.data,t.schedule.popoverVisible=!0,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 16:case"end":return e.stop()}},e,t,[[2,12]])}))()},scheduleAdd:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="cd "+t.singleForm.start_folder+" && "+t.singleForm.start_script,i=t.command_get(a,t.singleForm.type),s=i.command,n=i.detail,e.prev=4,e.next=7,c.a.post(vt,{user_id:t.user_id,script_id:t.singleForm.id,command:s,detail:n,version:t.singleForm.version,trigger_time:t.schedule.scheduleData.triggerDate+" "+t.schedule.scheduleData.triggerTime,is_automatic:1==t.schedule.scheduleData.is_automatic?1:0,interval_raw:Number(t.schedule.scheduleData.interval.value),interval_unit:t.schedule.scheduleData.interval.unit.select,schedule_id:t.schedule.scheduleData.schedule_id});case 7:o=e.sent,o.data,t.$message({message:"成功！",type:"success"}),t.schedule.dialogVisible=!1,t.schedule.scheduleData.triggerDate="",t.schedule.scheduleData.triggerTime="",t.schedule.scheduleData.is_automatic=!1,t.schedule.scheduleData.schedule_id=0,t.schedule.scheduleData.interval.value="",t.schedule.scheduleData.interval.unit.select=2,e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 23:case"end":return e.stop()}},e,t,[[4,19]])}))()},scheduleEdit:function(t){console.log(t),this.schedule.label="编辑定时任务",this.schedule.scheduleData.schedule_id=t.schedule_id,this.schedule.scheduleData.is_automatic=!!t.is_automatic,this.schedule.scheduleData.triggerDate=t.trigger_time.split(" ")[0],this.schedule.scheduleData.triggerTime=t.trigger_time.split(" ")[1].substr(0,5),this.schedule.scheduleData.interval.unit.select=t.is_automatic?t.interval_unit:2,this.schedule.scheduleData.interval.value=t.is_automatic?t.interval_raw:1,this.schedule.dialogVisible=!0},scheduleDelete:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认停止并删除定时任务吗?","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(gt,{user_id:e.user_id,schedule_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 12:case"end":return a.stop()}},a,e,[[0,8]])})));case 1:case"end":return a.stop()}},a,e)}))()},singleDataSetting:function(){this.$emit("edit")},singleDataDelete:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ut,{script_id:t.singleForm.id,user_id:t.user_id});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.$emit("deleted"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))).catch(function(){});case 1:case"end":return e.stop()}},e,t)}))()},command_get:function(t,e){var a="",i=[];if("1"==e){for(var s=0;s<this.singleForm.formDataDetail.length;s++){var n=this.singleForm.formDataDetail[s];if(i.push({}),i[i.length-1].type=n.type,i[i.length-1].label=n.label,i[i.length-1].value=n.value,"select"==i[i.length-1].type)for(var r in n.options)if(n.options[r].value==i[i.length-1].value){i[i.length-1].optionLabel=n.options[r].label;break}if("dateRange"!=n.type)a=a+" "+n.value;else{if(null==n.value)continue;for(var o=0;o<n.value.length;o++)a=a+" "+n.value[o]}}a=t+a}else if("2"==e){var l=t;for(s=0;s<this.singleForm.formDataDetail.length;s++){var c=this.singleForm.formDataDetail[s];if(i.push({}),i[i.length-1].type=c.type,i[i.length-1].label=c.label,i[i.length-1].value=c.value,"select"==i[i.length-1].type)for(var r in c.options)if(c.options[r].value==i[i.length-1].value){i[i.length-1].optionLabel=c.options[r].label;break}if("dateRange"!=c.type){p=new RegExp("%"+c.label+"%","g");l=l.replace(p,c.value)}else{if(null==c.value)continue;for(var d="",u=0;u<c.value.length;u++)d=d+" "+c.value[u];var p=new RegExp("%"+c.label+"%","g");l=l.replace(p,d)}}a=l}return{command:a,detail:i}}}),ct()(rt,"mounted",function(){}),rt),ft=(a("JBVa"),Object(u.a)(ht,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"single-data-setting"},[a("el-tooltip",{attrs:{effect:"dark",content:"回放最近一次由我运行的参数",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left",circle:""},on:{click:function(e){return t.singleDataReplay()}}})],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"查看最近一次由我运行的日志",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",plain:"",icon:"el-icon-tickets",circle:""},on:{click:function(e){return t.singleDataLog()}}})],1),t._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"查看最近50次运行记录",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"1010",trigger:"click"}},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max_height-medium"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.output.loading,expression:"output.loading"}],attrs:{size:"small",data:t.output.logs,stripe:""}},[a("el-table-column",{attrs:{width:"110",property:"user",label:"运行人"}}),t._v(" "),t._l(t.output.important_fields,function(t){return a("el-table-column",{key:t,attrs:{"min-width":"110",property:t,label:t}})}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200",property:"options",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-tickets"},on:{click:function(a){return t.log_output(e.row.output)}}},[t._v("日志")]),t._v(" "),a("el-popover",{attrs:{placement:"right",width:"350",trigger:"hover"}},[t._l(e.row.detail,function(e){return a("tr",{key:e},[a("td",{staticClass:"td--label"},[a("b",[t._v(t._s(e.label+":"))])]),t._v(" "),"select"==e.type?a("td",[t._v(t._s(e.optionLabel))]):t._e(),t._v(" "),"select"!=e.type?a("td",[t._v(t._s(e.value))]):t._e()])}),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-refresh-left"},on:{click:function(a){return t.log_replay(e.row.version,e.row.detail)}},slot:"reference"},[t._v("回放")])],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"150",property:"update_time",label:"运行开始时间"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",property:"duration",label:"耗时"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",property:"log_id",label:"运行ID"}})],2)],1),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-files",circle:"",loading:t.output.loading},on:{click:function(e){return t.singleDataShowLogs()}},slot:"reference"})],1)],1),t._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"定时运行",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"900",trigger:"click","v-model":t.schedule.popoverVisible}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.schedule.loading,expression:"schedule.loading"}],attrs:{data:t.schedule.schedules,stripe:""}},[a("el-table-column",{attrs:{width:"100",property:"schedule_id",label:"定时任务ID"}}),t._v(" "),a("el-table-column",{attrs:{width:"80",property:"user_name",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{width:"50",property:"is_automatic_text",label:"重复"}}),t._v(" "),a("el-table-column",{attrs:{width:"180",property:"trigger_time",label:"下次运行时间"}}),t._v(" "),a("el-table-column",{attrs:{width:"180",property:"update_time",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"250",property:"options",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"left",width:"350",trigger:"hover"}},[t._l(e.row.detail,function(e){return a("tr",{key:e},[a("td",{staticClass:"td--label"},[a("b",[t._v(t._s(e.label+":"))])]),t._v(" "),"select"==e.type?a("td",[t._v(t._s(e.optionLabel))]):t._e(),t._v(" "),"select"!=e.type?a("td",[t._v(t._s(e.value))]):t._e()])}),t._v(" "),a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-set-up"},slot:"reference"},[t._v("参数")])],2),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.scheduleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.scheduleDelete(e.row.schedule_id)}}},[t._v("停止")])]}}])})],1),t._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(e){t.schedule.dialogVisible=!0}}},[a("span",[t._v("\n            + 使用\n            "),a("b",[t._v("当前表单填写的参数")]),t._v(" 创建定时任务\n          ")])]),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-alarm-clock",circle:""},on:{click:function(e){return t.scheduleShow()}},slot:"reference"})],1)],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"编辑脚本",placement:"top"}},[a("el-popover",{attrs:{placement:"bottom-end",width:"250",trigger:"hover"}},[a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[t._v(t._s("最后修改人:"))])]),t._v(" "),a("td",[t._v(t._s(t.singleForm.user))])]),t._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[t._v(t._s("版本:"))])]),t._v(" "),a("td",[t._v(t._s("V"+t.singleForm.version))])]),t._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[t._v(t._s("运行次数:"))])]),t._v(" "),a("td",[t._v(t._s(t.singleForm.runs+"次"))])]),t._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[t._v(t._s("更新时间:"))])]),t._v(" "),a("td",[t._v(t._s(t.singleForm.update_time))])]),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-setting",circle:""},on:{click:function(e){return t.singleDataSetting()}},slot:"reference"})],1)],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"删除脚本",placement:"top"}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.singleDataDelete()}}})],1)],1),t._v(" "),a("el-drawer",{attrs:{title:t.schedule.label,visible:t.schedule.dialogVisible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(e){return t.$set(t.schedule,"dialogVisible",e)},closed:t.schedulenDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("定时运行时间：")])]),t._v(" "),a("td",[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:t.schedule.scheduleData.triggerDate,callback:function(e){t.$set(t.schedule.scheduleData,"triggerDate",e)},expression:"schedule.scheduleData.triggerDate"}})],1),t._v(" "),a("td",[a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:t.schedule.scheduleData.triggerTime,callback:function(e){t.$set(t.schedule.scheduleData,"triggerTime",e)},expression:"schedule.scheduleData.triggerTime"}})],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("重复：")])]),t._v(" "),a("td",[a("el-switch",{attrs:{false:"","active-color":"#409EFF","inactive-color":"#80868C"},model:{value:t.schedule.scheduleData.is_automatic,callback:function(e){t.$set(t.schedule.scheduleData,"is_automatic",e)},expression:"schedule.scheduleData.is_automatic"}})],1),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==t.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic == true"}]},[a("p",{staticClass:"inline_margin--medium"},[t._v("每")])]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==t.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic == true"}]},[a("el-input",{staticClass:"main_input--tiny inline_margin--small",attrs:{placeholder:"请输入",size:"small"},model:{value:t.schedule.scheduleData.interval.value,callback:function(e){t.$set(t.schedule.scheduleData.interval,"value",e)},expression:"schedule.scheduleData.interval.value"}})],1),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==t.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic == true"}]},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:t.schedule.scheduleData.interval.unit.select,callback:function(e){t.$set(t.schedule.scheduleData.interval.unit,"select",e)},expression:"schedule.scheduleData.interval.unit.select"}},t._l(t.schedule.scheduleData.interval.unit.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.schedule.dialogVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.scheduleAdd()}}},[t._v("提交")])],1)])])],1)},[],!1,null,"4c513156",null));ft.options.__file="ScriptButtons.vue";var _t=ft.exports,bt=function(t){return JSON.parse(_()(t))},wt=function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i),e+"-"+a+"-"+i},yt="/script/edit",xt="/script/subSystemScript",kt={name:"ScriptEdit",props:{user_id:Number,edit:Array},data:function(){return{edit:{title:"",start_folder:"",start_script:"",type:1,formData:[]},singleDataOptionDialog:{visible:!1,index:0,data:[]},cloneSettings:{visible:!1,script:{value:"",data:[]}}}},watch:{},methods:{swapItem:function(t,e,a){return t[e]=t.splice(a,1,t[e])[0],t},editFormAddSingleData:function(){this.edit.formData.push({type:"",label:"",value:"",placeHolder:"",options:"",createable:"",disabled:"",is_important:"",remark:""})},editFormDeleted:function(t){this.edit.formData.splice(t,1)},editFormMoveUp:function(t){t>0?this.swapItem(this.edit.formData,t,t-1):this.$message({message:"已经是第一位，不能再上移了哦",type:"info"})},editFormMoveDown:function(t){t<this.edit.formData.length-1?this.swapItem(this.edit.formData,t,t+1):this.$message({message:"已经是最后一位，不能再下移了哦",type:"info"})},singleDataOptionDialogClicked:function(t,e){this.singleDataOptionDialog.index=t,this.singleDataOptionDialog.visible=!0,this.singleDataOptionDialog.data=0==e.length?[]:bt(e)},singleDataOptionDialogClosed:function(){this.singleDataOptionDialog.data=[]},singleDataOptionDialogDeleted:function(t){this.singleDataOptionDialog.data.splice(t,1)},singleDataOptionDialogAddSingleData:function(){this.singleDataOptionDialog.data.push({label:"",value:""})},singleDataOptionDialogSubmited:function(){this.edit.formData[this.singleDataOptionDialog.index].options=this.singleDataOptionDialog.data,this.singleDataOptionDialog.visible=!1},editFormCloneButtonActive:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(xt,{sub_system_id:0});case 3:a=e.sent,200!==(i=a.data).code?t.$message({message:i.msg,type:"error"}):(t.cloneSettings.script.data=i.data,t.cloneSettings.visible=!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},editFormClone:function(t,e){this.edit.formData=e.detail,this.$message({message:"成功",type:"success"})},editFormSubmited:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.edit.buttonLoading=!0,e.prev=1,e.next=4,c.a.post(yt,{sub_system_id:t.edit.sub_system_id,script_id:t.edit.id,name:t.edit.title,start_folder:t.edit.start_folder,start_script:t.edit.start_script,type:Number(t.edit.type),detail:t.edit.formData,user_id:t.user_id});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.edit.visible=!1,t.$emit("done"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:t.edit.buttonLoading=!1;case 16:case"end":return e.stop()}},e,t,[[1,11]])}))()}}},Ct=(a("NDUg"),Object(u.a)(kt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"edit-form-card margin_left-medium margin_right-medium"},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max_height-large padding-right-19"},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("脚本名称：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.edit.title,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入名称"},model:{value:t.edit.title,callback:function(e){t.$set(t.edit,"title",e)},expression:"edit.title"}})],1)],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("起始文件夹：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.edit.start_folder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始文件夹"},model:{value:t.edit.start_folder,callback:function(e){t.$set(t.edit,"start_folder",e)},expression:"edit.start_folder"}})],1)],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("起始脚本：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.edit.start_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始脚本"},model:{value:t.edit.start_script,callback:function(e){t.$set(t.edit,"start_script",e)},expression:"edit.start_script"}})],1)],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("组合方式：")])]),t._v(" "),a("td",[a("div",[a("td",{staticClass:"dialog-type-order"},[a("el-radio",{attrs:{label:"1"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}},[t._v("顺序")])],1),t._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"顺序组合组件值来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("td",{staticClass:"dialog-type-replace"},[a("el-radio",{attrs:{label:"2"},model:{value:t.edit.type,callback:function(e){t.$set(t.edit,"type",e)},expression:"edit.type"}},[t._v("替换")])],1),t._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"使用组件值替换起始脚本中格式为'%组件名称%'的字段来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])])])])],1),t._v(" "),t._l(t.edit.formData,function(e){return a("div",{key:e.key},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",{staticClass:"edit-form-card"},[a("el-col",{attrs:{span:21}},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("组件名称：")])]),t._v(" "),a("td",[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入组件名称"},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"singleData.label"}})],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("组件类型：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"请选择组件类型",filterable:"","default-first-option":""},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"singleData.type"}},t._l(t.edit.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),"select"==e.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("选项：")])]),t._v(" "),a("td",[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){t.singleDataOptionDialogClicked(t.edit.formData.indexOf(e),e.options)}}},[t._v("编辑选项")])],1)]):t._e(),t._v(" "),"select"==e.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("是否可创建选项：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:e.createable,callback:function(a){t.$set(e,"createable",a)},expression:"singleData.createable"}},t._l(t.edit.boolOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]):t._e(),t._v(" "),"date"!=e.type&&"dateRange"!=e.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("默认值：")])]),t._v(" "),"select"!=e.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无默认值可以留空"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}})],1)],1):t._e(),t._v(" "),"select"==e.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入选项中的'值'作为默认值，如无默认值可留空"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}})],1)],1):t._e(),t._v(" "),"select"==e.type?a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"注意：如选择器有默认值，需要填写的是选项中的'值'，而非'标签'",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e()]):t._e(),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("是否只读：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:e.disabled,callback:function(a){t.$set(e,"disabled",a)},expression:"singleData.disabled"}},t._l(t.edit.boolOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),"dateRange"!=e.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("占位文字：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.placeHolder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无占位文字可以留空"},model:{value:e.placeHolder,callback:function(a){t.$set(e,"placeHolder",a)},expression:"singleData.placeHolder"}})],1)],1)]):t._e(),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("备注：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.remark,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无备注可以留空"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"singleData.remark"}})],1)],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("是否有额外按钮：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:e.extra_button,callback:function(a){t.$set(e,"extra_button",a)},expression:"singleData.extra_button"}},t._l(t.edit.boolOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"额外按钮配置为'是'时，组件右侧会出现一个按钮，点击按钮可以运行'额外按钮运行脚本'的脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),t._v(" "),1==e.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("额外按钮名称：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.extra_button_label,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮名称"},model:{value:e.extra_button_label,callback:function(a){t.$set(e,"extra_button_label",a)},expression:"singleData.extra_button_label"}})],1)],1)]):t._e(),t._v(" "),1==e.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("额外按钮运行脚本：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.extra_button_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮运行脚本"},model:{value:e.extra_button_script,callback:function(a){t.$set(e,"extra_button_script",a)},expression:"singleData.extra_button_script"}})],1)],1),t._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"点击'额外按钮'可以运行此处填写的脚本，并将此处脚本的运行输出返回至页面",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]):t._e(),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("是否在列表展示：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:e.is_important,callback:function(a){t.$set(e,"is_important",a)},expression:"singleData.is_important"}},t._l(t.edit.boolOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"选为是会将此组件使用单独的一列在运行记录中展示，建议不要设置太多列，否则会拖慢页面速度",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),t._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("是否显示：")])]),t._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为是",filterable:"","default-first-option":""},model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"singleData.visible"}},t._l(t.edit.boolOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"当选为'否'时，组件在页面上将不可见",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])]),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"div-flex"},[a("div",[a("i",{staticClass:"editFormRightButton editFormMoveUp el-icon-top",on:{click:function(a){t.editFormMoveUp(t.edit.formData.indexOf(e))}}})]),t._v(" "),a("div",[a("i",{staticClass:"editFormRightButton editFormMoveDown el-icon-bottom",on:{click:function(a){t.editFormMoveDown(t.edit.formData.indexOf(e))}}})]),t._v(" "),a("div",[a("i",{staticClass:"editFormRightButton editFormDeleted el-icon-close",on:{click:function(a){t.editFormDeleted(t.edit.formData.indexOf(e))}}})])])])],1)],1)])}),t._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(e){return t.editFormAddSingleData()}}},[a("span",[t._v("+ 添加参数")])])],2)],1),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{slot:"reference",size:"small"},nativeOn:{click:function(e){return t.editFormCloneButtonActive()}},slot:"reference"},[t._v("复制现有脚本的组件配置")]),t._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(e){t.edit.visible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:t.edit.buttonLoading},nativeOn:{click:function(e){return t.editFormSubmited()}}},[t._v("提交")])],1)]),t._v(" "),a("el-drawer",{attrs:{title:"选择想要复制的配置",visible:t.cloneSettings.visible,"close-on-click-modal":!1,size:"25%"},on:{"update:visible":function(e){return t.$set(t.cloneSettings,"visible",e)}}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{staticClass:"min_height-medium scrollbar-div max_height-large"},[a("div",{staticClass:"margin_right-small"},[a("el-table",{attrs:{data:t.cloneSettings.script.data,size:"mini"}},[a("el-table-column",{attrs:{label:"名称",width:"250",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.editFormClone(e.$index,e.row)}}},[t._v("选择")])]}}])})],1)],1)])])]),t._v(" "),a("el-drawer",{attrs:{title:"编辑",visible:t.singleDataOptionDialog.visible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(e){return t.$set(t.singleDataOptionDialog,"visible",e)},closed:t.singleDataOptionDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max_height-large padding-right-19 padding_bottom-medium"},[t._l(t.singleDataOptionDialog.data,function(e){return a("div",{key:e.key},[a("div",[a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v("标签：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.label,placement:"top"}},[a("el-input",{staticStyle:{width:"12vw"},attrs:{size:"small",placeholder:"请输入选项展示文字"},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"singleDataOption.label"}})],1)],1),t._v(" "),a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"singleDataOptionDialogValue"},[t._v("值：")])]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.value,placement:"top"}},[a("el-input",{staticStyle:{width:"16vw"},attrs:{size:"small",placeholder:"请输入选项实际的值"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleDataOption.value"}})],1)],1),t._v(" "),a("td",[a("i",{staticClass:"singleDataOptionDialogDeleted el-icon-delete",on:{click:function(a){t.singleDataOptionDialogDeleted(t.singleDataOptionDialog.data.indexOf(e))}}})])])])}),t._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(e){return t.singleDataOptionDialogAddSingleData()}}},[a("span",[t._v("+ 添加选项")])])],2),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.singleDataOptionDialog.visible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.singleDataOptionDialogSubmited()}}},[t._v("保存")])],1)])])],1)},[],!1,null,null,null));Ct.options.__file="ScriptEdit.vue";var Dt="/script/subSystemScript",St="/script/run",$t="/script/terminate",Et="/script/runOutput",zt="/script/saveOutput",Tt="/script/extraButtonScriptRun",Nt={name:"ConsoleScriptDetail",components:{ScriptButtons:_t,ScriptEdit:Ct.exports},props:{user_id:Number,systemId:Number,newTabBool:Boolean,activeScriptName:String},watch:{systemId:function(t,e){this.systemIdChanged(t)},activeTab:function(t,e){this.activeTabChanged(t)},activeScriptName:function(t,e){console.log(t),this.activeTab=t},newTabBool:function(t,e){t&&!e&&this.newScript()}},data:function(){return{activeTab:"",activeTabIndex:0,activeScriptId:0,formData:[],extra_button:{visible:!1,output:"",buttonLoading:!1,loading:!1,output_temp:""},output:{canBeTerminate:!1,loading:!1,log_id:0,logs:[],visible:!1,text:"",important_fields:[],isAlert:!1,scrollInit:!0},edit:{buttonLoading:!1,dialogTitle:"编辑",id:0,sub_system_id:0,title:"",start_folder:"",start_script:"",type:0,visible:!1,typeOptions:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期",value:"date"},{label:"日期范围",value:"dateRange"}],boolOptions:[{label:"是",value:1},{label:"否",value:0}],formData:[]},submitButtonLoading:!1}},methods:{newScript:function(){this.edit.dialogTitle="新增脚本",this.edit.sub_system_id=this.systemId,this.edit.id=0,this.edit.visible=!0},singleDataReplay:function(t){this.formData[this.activeTabIndex]=t},singleDataLog:function(t){var e=this;this.output.visible=!0,this.output.text=t,this.output.scrollInit&&(this.$nextTick(function(){try{new dt.a(e.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1}).refresh()}catch(t){console.log("滚动条设置失败"+t)}}),this.output.scrollInit=!1)},flush:function(){this.systemIdChanged(this.systemId)},activeTabChanged:function(t){for(var e=0;e<this.formData.length;e++)if(this.formData[e].id==t){this.activeTabIndex=e,this.activeScriptId=Number(t);break}},systemIdChanged:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!=t){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e.subSystemScript(t);case 4:0!=e.formData.length&&(e.activeTab=e.formData[0].id),e.$emit("formData",e.formData);case 6:case"end":return a.stop()}},a,e)}))()},subSystemScript:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n,o,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.formDataLoading=!0,a.prev=1,a.next=4,c.a.post(Dt,{user_id:e.user_id,sub_system_id:t});case 4:for(i=a.sent,s=i.data,e.formData=[],n=0;n<s.data.length;n++)for(e.formData.push((o={title:s.data[n].name,id:String(s.data[n].id),start_folder:s.data[n].start_folder,start_script:s.data[n].start_script,runs:s.data[n].runs,user:s.data[n].user,update_time:s.data[n].update_time,version:s.data[n].version},ct()(o,"update_time",s.data[n].update_time),ct()(o,"type",s.data[n].type),ct()(o,"sub_system_id",s.data[n].sub_system_id),ct()(o,"formDataDetail",[]),o)),l=0;l<s.data[n].detail.length;l++)e.formData[e.formData.length-1].formDataDetail.push({type:s.data[n].detail[l].type,label:s.data[n].detail[l].label,value:s.data[n].detail[l].value,placeHolder:s.data[n].detail[l].place_holder,options:s.data[n].detail[l].options,createable:s.data[n].detail[l].createable,disabled:s.data[n].detail[l].disabled,remark:s.data[n].detail[l].remark,is_important:s.data[n].detail[l].is_important,visible:s.data[n].detail[l].visible,extra_button:s.data[n].detail[l].extra_button,extra_button_label:s.data[n].detail[l].extra_button_label,extra_button_script:s.data[n].detail[l].extra_button_script,version:s.data[n].detail[l].version});return e.formDataLoading=!1,a.abrupt("return",e.formData);case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 16:case"end":return a.stop()}},a,e,[[1,12]])}))()},singleDataSetting:function(){var t=this;this.subSystemScript(this.systemId).then(function(e){t.edit.dialogTitle="编辑脚本",t.edit.title=e[t.activeTabIndex].title,t.edit.id=e[t.activeTabIndex].id,t.edit.start_folder=e[t.activeTabIndex].start_folder,t.edit.start_script=e[t.activeTabIndex].start_script,t.edit.type=String(e[t.activeTabIndex].type),t.edit.formData=e[t.activeTabIndex].formDataDetail,t.edit.sub_system_id=e[t.activeTabIndex].sub_system_id,t.edit.visible=!0})},editFormClosed:function(){this.edit.dialogTitle="编辑",this.edit.id=0,this.edit.title="",this.edit.start_folder="",this.edit.start_script="",this.edit.type=1,this.edit.formData=[]},extraButtonClicked:function(t,e,a){var i=this;if(this.extra_button.visible)this.extra_button.visible=!1;else{this.extra_button.output="",this.extra_button.output_temp="",this.extra_button.buttonLoading=!0;var s=this.command_get(a,2).command;this.extra_button.loading=!0;try{c.a.post(Tt,{user_id:this.user_id,command:s}).then(function(a){if(-1==a.data.data.process_id)i.$message({message:"任务创建错误，请联系管理员！",type:"error"});else var s=a.data.data.process_id;i.extraButtonFlushOutput(t,e,s)})}catch(t){console.log(t),this.$message({message:t.response.data.msg,type:"error"})}}},extraButtonFlushOutput:function(t,e,a){var i=this;try{c.a.post(Et,{process_id:a,user_id:this.user_id}).then(function(s){if(-1==s.data.data.status)return i.$message({message:data.msg,type:"error"}),i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1);if(0==s.data.data.status){try{var n=JSON.parse(i.extra_button.output_temp+s.data.data.output);i.extra_button.output=n.data.msg.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),void 0!=n.data.value&&(i.formData[t].formDataDetail[e].value=n.data.value),void 0!=n.data.options&&(i.formData[t].formDataDetail[e].options=n.data.options)}catch(t){i.extra_button.output=(i.extra_button.output_temp+s.data.data.output).replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")}return i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1)}1==s.data.data.status&&(i.extra_button.output_temp=i.extra_button.output_temp+s.data.data.output,i.extraButtonFlushOutput(t,e,a))})}catch(t){console.log(t),this.$message({message:t.response.data.msg,type:"error"})}},submit:function(){var t=this;this.submitButtonLoading=!0;var e="cd "+this.formData[this.activeTabIndex].start_folder+" && "+this.formData[this.activeTabIndex].start_script,a=this.command_get(e,this.formData[this.activeTabIndex].type),i=a.command,s=Math.floor(1e14*Math.random()),n=w()(this.formData[this.activeTabIndex].id+this.$cookies.get("user_id")+this.$cookies.get("user_key")+s+i);try{c.a.post(St,{id:this.formData[this.activeTabIndex].id,command:i,version:this.formData[this.activeTabIndex].version,detail:a.detail,user_id:this.user_id,salt:s,sign:n}).then(function(e){-1==e.data.data.process_id?t.$message({message:"任务创建错误，请联系管理员！",type:"error"}):(t.output.log_id=e.data.data.log_id,t.output.visible=!0,t.output.text=i+"<br>",t.output.process_id=e.data.data.process_id,t.output.canBeTerminate=!0,t.flushOutput(e.data.data.process_id))})}catch(t){console.log(t),this.$message({message:t.response.data.msg,type:"error"})}},terminate:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm("确定要停止运行吗?","提示",{}).then(l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post($t,{user_id:t.user_id,process_id:t.output.process_id});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])})));case 1:case"end":return e.stop()}},e,t)}))()},flushOutput:function(t){var e=this;this.output.isAlert=!0;try{c.a.post(Et,{process_id:t,user_id:this.user_id}).then(function(a){if(-1==a.data.data.status)return e.$message({message:data.msg,type:"error"}),void(e.submitButtonLoading=!1);if(0!=a.data.data.status)1==a.data.data.status&&(e.output.text=e.output.text+a.data.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),e.$nextTick(function(){try{var t=new dt.a(e.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});t.scrollTo(0,t.maxScrollY),t.destroy()}catch(t){console.log("滚动条设置失败"+t)}}),e.flushOutput(t));else{e.output.canBeTerminate=!1,e.output.isAlert=!1,e.output.text="<div>"+e.output.text+"</div>"+a.data.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),e.output.text=e.output.text.replace(/#&nbsp;/g," "),e.$message({message:"运行结束，请查看输出。",type:"success"}),e.$nextTick(function(){var t=new dt.a(e.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});t.scrollTo(0,t.maxScrollY)});try{c.a.post(zt,{log_id:e.output.log_id,output:e.output.text}).then(function(t){e.submitButtonLoading=!1})}catch(t){console.log(t),e.$message({message:"记录运行日志错误！请联系管理员"+t.response.data.msg,type:"error"})}}})}catch(t){console.log(t),this.$message({message:t.response.data.msg,type:"error"})}},command_get:function(t,e){var a="",i=[];if("1"==e){for(var s=0;s<this.formData[this.activeTabIndex].formDataDetail.length;s++){var n=this.formData[this.activeTabIndex].formDataDetail[s];if(i.push({}),i[i.length-1].type=n.type,i[i.length-1].label=n.label,i[i.length-1].value=n.value,"select"==i[i.length-1].type)for(var r in n.options)if(n.options[r].value==i[i.length-1].value){i[i.length-1].optionLabel=n.options[r].label;break}if("dateRange"!=n.type)a=a+" "+n.value;else{if(null==n.value)continue;for(var o=0;o<n.value.length;o++)a=a+" "+n.value[o]}}a=t+a}else if("2"==e){var l=t;for(s=0;s<this.formData[this.activeTabIndex].formDataDetail.length;s++){var c=this.formData[this.activeTabIndex].formDataDetail[s];if(i.push({}),i[i.length-1].type=c.type,i[i.length-1].label=c.label,i[i.length-1].value=c.value,"select"==i[i.length-1].type)for(var r in c.options)if(c.options[r].value==i[i.length-1].value){i[i.length-1].optionLabel=c.options[r].label;break}if("dateRange"!=c.type){p=new RegExp("%"+c.label+"%","g");l=l.replace(p,c.value)}else{if(null==c.value)continue;for(var d="",u=0;u<c.value.length;u++)d=d+" "+c.value[u];var p=new RegExp("%"+c.label+"%","g");l=l.replace(p,d)}}a=l}return{command:a,detail:i}},outputDialogClose:function(t){var e=this;this.output.isAlert?this.$confirm("在运行中关闭运行窗口会导致运行日志保存不完整，仍然要关闭吗?","提示",{}).then(function(a){e.output.text="",t()}):(this.output.text="",t())}}},Ft=(a("GgLw"),Object(u.a)(Nt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.formDataLoading,expression:"formDataLoading"}],staticClass:"right-side-box-card"},[a("el-row",[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.formData.length,expression:"formData.length==0"}],staticClass:"info-text"},[a("i",{staticClass:"el-icon-back"}),t._v(" "),a("div",[t._v("请选择左侧系统")])]),t._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:0!=t.formData.length,expression:"formData.length!=0"}],attrs:{addable:""},on:{"tab-add":t.newScript},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},t._l(t.formData,function(e,i){return a("el-tab-pane",{key:e.key,attrs:{label:e.title,name:e.id,lazy:!0}},[a("div",{staticClass:"div-flex"},[a("div",t._l(e.formDataDetail,function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.visible,expression:"singleData.visible==1"}],key:e.key},[a("el-row",{staticClass:"singleData"},[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[t._v(t._s(e.label)+"：")])]),t._v(" "),a("td",{staticClass:"singleDataCol",attrs:{type:"flex"}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":"500",content:e.value,placement:"top"}},["input"==e.type?a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:e.placeHolder,disabled:0!=e.disabled},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}}):t._e()],1),t._v(" "),"select"==e.type?a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:e.placeHolder,disabled:0!=e.disabled,filterable:"","allow-create":0!=e.createable,"default-first-option":""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}},t._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"date"==e.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:e.placeHolder,disabled:0!=e.disabled},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}}):t._e(),t._v(" "),"dateRange"==e.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:e.placeHolder,disabled:0!=e.disabled},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"singleData.value"}}):t._e()],1),t._v(" "),a("td",{staticClass:"padding_left-small padding_right-small min_width-small"},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:""!=e.remark,expression:"singleData.remark!=''"}],staticClass:"question-mark",attrs:{effect:"dark",content:e.remark,placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),0!=e.extra_button?a("td",[a("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"},on:{"after-leave":function(e){t.extra_button.output="",t.extra_button.output_temp=""}},model:{value:t.extra_button.visible,callback:function(e){t.$set(t.extra_button,"visible",e)},expression:"extra_button.visible"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.extra_button.loading,expression:"extra_button.loading"}],staticClass:"min_height-medium",domProps:{innerHTML:t._s(t.extra_button.output)}}),t._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",disabled:t.extra_button.buttonLoading},on:{click:function(a){return t.extraButtonClicked(i,s,e.extra_button_script)}},slot:"reference"},[t._v(t._s(e.extra_button_label))])],1)],1):t._e()])],1)}),0),t._v(" "),a("ScriptButtons",{attrs:{user_id:t.user_id,singleForm:e},on:{replay:t.singleDataReplay,output:t.singleDataLog,deleted:t.flush,edit:t.singleDataSetting}})],1)])}),1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"60px","margin-left":"10","margin-right":"10px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.formData.length,expression:"formData.length!=0"}],staticStyle:{margin:"20px 20px 20px 20px",position:"absolute",bottom:"0",right:"0","z-index":"99"},attrs:{loading:t.submitButtonLoading,type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"输出","v-if":t.output.visible,visible:t.output.visible,size:"70%",direction:"btt","before-close":t.outputDialogClose},on:{"update:visible":function(e){return t.$set(t.output,"visible",e)}}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{ref:"outputDialog",staticClass:"output-div"},[a("div",{staticClass:"output-html",domProps:{innerHTML:t._s(t.output.text)}})])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.output.canBeTerminate,expression:"output.canBeTerminate"}],staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small",plain:"",type:"danger"},nativeOn:{click:function(e){return t.terminate()}}},[t._v("停止运行")])],1)]),t._v(" "),a("el-drawer",{attrs:{title:t.edit.dialogTitle,visible:t.edit.visible,"close-on-click-modal":!1,size:"60%"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},closed:t.editFormClosed}},[a("ScriptEdit",{attrs:{user_id:t.user_id,edit:t.edit},on:{done:t.flush}})],1)],1)},[],!1,null,null,null));Ft.options.__file="ScriptDetail.vue";var Mt={name:"Script",components:{ScriptColumn:ot,ScriptDetail:Ft.exports},props:{user_id:Number},data:function(){return{systemId:Number,scriptName:String,newTabBool:!1,formData:[]}},watch:{},methods:{newTab:function(){this.newTabBool=!0},subSystemClicked:function(t){this.systemId=t},scriptNameClicked:function(t){this.scriptName=t},formDataChanged:function(t){this.formData=t}}},It=(a("Dk/J"),Object(u.a)(Mt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{staticClass:"lift-side-bar",attrs:{span:5}},[a("ScriptColumn",{attrs:{user_id:t.user_id,formData:t.formData},on:{newTab:t.newTab,subSystemClicked:t.subSystemClicked,scriptNameClicked:t.scriptNameClicked}})],1),t._v(" "),a("el-col",{staticClass:"right-side-bar",attrs:{span:19}},[a("ScriptDetail",{attrs:{activeScriptName:t.scriptName,systemId:t.systemId,user_id:t.user_id,newTabBool:t.newTabBool},on:{formData:t.formDataChanged}})],1)],1)],1)},[],!1,null,null,null));It.options.__file="Script.vue";var Ot=It.exports,Pt=a("EbCt"),Lt="/widget/suite/detail",Rt="/widget/suite/save",At="widget/get_all",Gt={name:"widgetEdit",props:{user_id:Number},components:{SlickItem:Pt.SlickItem,SlickList:Pt.SlickList},watch:{},data:function(){return{items:[],widgets:[],edit:{visible:!1,action:"",widgetSuiteIndexInOpration:"",widgetSuiteName:""}}},methods:{widgetSuiteDetailGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Lt,{user_id:t.user_id});case 3:a=e.sent,i=a.data,t.items=i.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},widgetAllGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(At);case 3:a=e.sent,i=a.data,t.widgets=i.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},widgetAdd:function(t){this.widgetAllGet(),this.edit.title="添加小组件",this.edit.action="addWidget",this.edit.widgetSuiteIndexInOpration=t,this.edit.visible=!0},widgetAdded:function(t){var e=this.edit.widgetSuiteIndexInOpration;this.items[e].widget_detail.push({id:t.id,name_zh:t.name_zh}),this.edit.visible=!1},widgetSuiteEdit:function(t){this.edit.title="编辑组件集名称",this.edit.action="editWidgetSuite",this.edit.widgetSuiteIndexInOpration=t,this.edit.widgetSuiteName=this.items[t].name,this.edit.visible=!0},widgetSuiteDelete:function(t,e){var a=this;this.$confirm("确认删除["+t.name+"]吗?","提示",{}).then(l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.items.splice(e,1);case 1:case"end":return t.stop()}},t,a)})))},widgetDelete:function(t,e,a){var i=this;this.$confirm("确认删除["+e.name_zh+"]吗?","提示",{}).then(l()(r.a.mark(function s(){var n;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(i.items[t].widget_detail.splice(a,1),n=0;n<i.items[t].widget_detail;n++)i.items[t].detail[n]==e.id&&i.items[t].detail.splice(n,1);case 2:case"end":return s.stop()}},s,i)})))},widgetSuiteAdd:function(){this.edit.title="新增组件集",this.edit.action="editWidgetSuite",this.edit.visible=!0},widgetSuiteEdited:function(){if("新增组件集"==this.edit.title)this.items.push({name:this.edit.widgetSuiteName,detail:[],widget_detail:[]});else if("编辑组件集名称"==this.edit.title){var t=this.edit.widgetSuiteIndexInOpration;this.items[t].name=this.edit.widgetSuiteName}this.edit.visible=!1},editFormClosed:function(){this.edit.widgetSuiteName=""},submit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=0;a<t.items.length;a++)for(t.items[a].order=a,t.items[a].detail=[],i=0;i<t.items[a].widget_detail.length;i++)t.items[a].detail.push(t.items[a].widget_detail[i].id);return e.prev=1,e.next=4,c.a.post(Rt,{user_id:t.user_id,suite_data:t.items});case 4:s=e.sent,n=s.data,t.$message({message:n.msg,type:"success"}),location.reload(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()}},mounted:function(){this.widgetSuiteDetailGet()}},Wt=(a("DrTf"),Object(u.a)(Gt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"scrollbar-div",staticStyle:{"max-height":"50vh"}},[a("el-row",{staticClass:"margin_left-large"},[a("p",{staticClass:"notesText",staticStyle:{"font-size":"12px",color:"#f56c6c","padding-top":"0px","margin-top":"0px","margin-bottom":"10px"}},[t._v("\n      *拖动以排序\n    ")]),t._v(" "),a("SlickList",{staticClass:"SortableList",staticStyle:{float:"left"},attrs:{lockToContainerEdges:!0,axis:"x",lockAxis:"x"},on:{input:t.getChangeLists},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,function(e,i){return a("SlickItem",{key:i,staticClass:"SortableItem",attrs:{index:i}},[a("el-row",[a("el-row",{staticClass:"div-flex margin_top-medium",staticStyle:{"margin-bottom":"30px"}},[a("i",{staticClass:"el-icon-s-operation margin_right-medium margin_left-small",staticStyle:{color:"#6a6c70","margin-top":"3px"}}),t._v(" "),a("p",{staticClass:"noMargin"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"margin_left-large"},[a("el-tooltip",{attrs:{content:"编辑组件集名称",placement:"top"}},[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini"},on:{click:function(e){return t.widgetSuiteEdit(i)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"为组件集增加组件",placement:"top"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini"},on:{click:function(e){return t.widgetAdd(i)}}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"删除组件集",placement:"top"}},[a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.widgetSuiteDelete(e,i)}}})],1)],1)]),t._v(" "),a("el-row",[a("SlickList",{staticClass:"list",attrs:{lockToContainerEdges:!0,lockAxis:"y"},model:{value:e.widget_detail,callback:function(a){t.$set(e,"widget_detail",a)},expression:"item.widget_detail"}},t._l(e.widget_detail,function(e,s){return a("SlickItem",{key:s,staticClass:"list-item",attrs:{index:s}},[a("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#6a6c70"}}),t._v(" "),a("span",{staticClass:"slick_list_item_span"},[t._v(t._s(e.name_zh))]),t._v(" "),a("div",{staticClass:"slick_list_item_button"},[a("el-tooltip",{attrs:{content:"删除组件",placement:"right"}},[a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.widgetDelete(i,e,s)}}})],1)],1)])}),1)],1)],1)],1)}),1),t._v(" "),a("el-tooltip",{attrs:{content:"增加组件集",placement:"top"}},[a("el-button",{staticClass:"el-icon-plus margin_left-large",staticStyle:{"margin-top":"125px"},attrs:{circle:""},on:{click:function(e){return t.widgetSuiteAdd()}}})],1)],1),t._v(" "),a("el-row",{staticClass:"margin_left-large"},[a("el-button",{staticClass:"margin_top-medium",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1),t._v(" "),a("el-drawer",{attrs:{title:t.edit.title,visible:t.edit.visible,size:"60%",direction:"btt"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},closed:t.editFormClosed}},["editWidgetSuite"==t.edit.action?a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large scrollbar-div",staticStyle:{"max-height":"50vh"}},[a("div",{staticClass:"td__p--label td--label"},[t._v("请输入组件集名称：")]),t._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:t.edit.widgetSuiteName,callback:function(e){t.$set(t.edit,"widgetSuiteName",e)},expression:"edit.widgetSuiteName"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.widgetSuiteEdited()}}},[t._v("确定")])],1):t._e(),t._v(" "),a("div",{staticClass:"scrollbar-div margin_left-medium margin_bottom-medium",staticStyle:{width:"500px","max-height":"50vh"}},["addWidget"==t.edit.action?a("el-table",{key:Math.random(),staticStyle:{width:"100%"},attrs:{size:"mini",data:t.widgets,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"id",label:"ID","v-show":!1}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"name_zh",label:"名称"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.widgetAdded(e.row)}}},[t._v("选择")])]}}],null,!1,1495080271)})],1):t._e()],1)])],1)},[],!1,null,"48ce939e",null));Wt.options.__file="WidgetEdit.vue";var Bt=Wt.exports,Vt="/console/get",jt={name:"Console",props:{user_id:Number,login_name:String},components:{Script:Ot,Privilege:tt,widgetEdit:Bt},data:function(){return{consoleOptions:[],drawer:{title:"",size:"",visible:!1,direction:"ttb"},activeComponent:""}},methods:{consoleGetFront:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(Vt);case 3:a=e.sent,i=a.data,t.consoleOptions=i.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},consoleOptionClicked:function(t){this.activeComponent=t.component_name,this.drawer.title=t.name,this.drawer.visible=!0,this.drawer.direction="ttb",this.drawer.size="85%"}},created:function(){},mounted:function(){this.consoleGetFront()}},Ut=(a("YOjG"),Object(u.a)(jt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"console-main"},[a("el-row",{staticClass:"margin_bottom-large"},t._l(t.consoleOptions,function(e){return a("el-col",{key:e,attrs:{span:5,offset:1}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.name))])]),t._v(" "),a("i",{class:e.icon,staticStyle:{"font-size":"30px"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small"},on:{click:function(a){return t.consoleOptionClicked(e)}}},[t._v("进入")])],1)],1)}),1),t._v(" "),a("el-drawer",{attrs:{title:t.drawer.title,visible:t.drawer.visible,direction:t.drawer.direction,size:t.drawer.size},on:{"update:visible":function(e){return t.$set(t.drawer,"visible",e)}}},[a("div",{staticClass:"scrollbar-div",staticStyle:{"max-height":"73vh"}},[1==t.drawer.visible?a("div",{staticClass:"margin-medium"},["Privilege"==t.activeComponent?a("div",[a("Privilege",{attrs:{user_id:t.user_id,login_name:t.login_name}})],1):t._e(),t._v(" "),"Script"==t.activeComponent?a("div",[a("Script",{attrs:{user_id:t.user_id}})],1):t._e(),t._v(" "),"widgetEdit"==t.activeComponent?a("div",[a("widgetEdit",{attrs:{user_id:t.user_id}})],1):t._e()]):t._e()])])],1)},[],!1,null,"09a52c98",null));Ut.options.__file="Console.vue";var qt=Ut.exports,Ht="/cloudDrive/get",Kt="/cloudDrive/save",Yt="/cloudDrive/share/set",Xt="/cloudDrive/share/cancel",Jt="/cloudDrive/delete",Zt="/cloudDrive/changeName",Qt={name:"CloudDrive",props:{user_id:Number},components:{},watch:{},data:function(){return{tableData:[],pagination:{currentPage:1,pageSize:10,total:0}}},methods:{paginationCurrentChange:function(t){this.pagination.currentPage=t,this.get()},paginationSizeChange:function(t){this.pagination.pageSize=t,this.get()},uploadSuccess:function(t,e,a){this.save(t.data.id),this.$emit("cloudStatusChanged",0),this.$refs.upload.clearFiles()},uploadProgress:function(){this.$emit("cloudStatusChanged",1)},submitEditMode:function(t,e,a){var i=this;return l()(r.a.mark(function s(){var n,o;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.a.post(Zt,{user_id:i.user_id,file_id:e,file_name:a});case 3:return n=s.sent,o=n.data,s.next=7,i.changeEditMode(t,"disable");case 7:i.get(),i.$message({message:o.msg,type:"success"}),s.next=15;break;case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0),i.$message({message:s.t0.response.data.msg,type:"error"});case 15:case"end":return s.stop()}},s,i,[[0,11]])}))()},changeEditMode:function(t,e){for(var a=0;a<this.tableData.length;a++)if(this.tableData[a].id==t){"enable"==e&&(this.tableData[a].editMode=!0),"disable"==e&&(this.tableData[a].editMode=!1),this.$set(this.tableData,a,this.tableData[a]);break}},get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Ht,{user_id:t.user_id,pagination_size:t.pagination.pageSize,current_page:t.pagination.currentPage});case 3:for(a=e.sent,i=a.data,t.tableData=i.data.list,s=0;s<t.tableData.length;s++)t.tableData[s].editMode=!1;t.pagination.total=i.data.total,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},save:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Kt,{user_id:e.user_id,file_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},download:function(t){var e=this;return l()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:try{(i=document.createElement("iframe")).src="/download?file_id="+t,i.style.display="none",document.body.appendChild(i)}catch(t){console.log(t),e.$message({message:t.response.data.msg,type:"error"})}case 1:case"end":return a.stop()}},a,e)}))()},share:function(t){var e=this;return l()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Yt,{user_id:e.user_id,id:t});case 3:i=a.sent,i.data,e.get(),e.$message({message:"创建分享链接成功，点击[复制分享链接]按钮复制吧！",type:"success"}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},onCopy:function(t){this.$message({message:"复制分享链接成功！现在就去粘贴吧！",type:"success"})},onError:function(t){alert("复制失败")},unShare:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("取消分享后，原来的分享链接将失效，确定取消分享吗？","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Xt,{user_id:e.user_id,id:t});case 3:i=a.sent,s=i.data,e.get(),e.$message({message:s.msg,type:"success"}),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()},del:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗？","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Jt,{user_id:e.user_id,id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()}},mounted:function(){this.get(),this.timer=window.setInterval(this.get,6e4)},beforeDestroy:function(){window.clearInterval(this.timer)}},te=Object(u.a)(Qt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"margin_bottom-large"},[a("div",{staticClass:"margin_left-medium margin_right-medium",staticStyle:{"text-align":"center"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"text-align":"center"},attrs:{drag:"",action:"/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-progress":t.uploadProgress,"on-success":t.uploadSuccess,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload,"on-exceed":t.handleExceed}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n          将文件拖到此处，或\n          "),a("em",[t._v("点击上传")])])])],1)]),t._v(" "),a("el-row",[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{staticClass:"scrollbar-div",staticStyle:{"max-height":"calc(100vh - 435px)",height:"calc(100vh - 435px)"}},[a("el-table",{staticStyle:{"text-align":"center"},attrs:{data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"inline-flex"}},[0==e.row.editMode?a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.file_name))]):t._e(),t._v(" "),0==e.row.editMode?a("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px"},on:{click:function(a){return t.changeEditMode(e.row.id,"enable")}}}):t._e(),t._v(" "),1==e.row.editMode?a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.row.file_name,callback:function(a){t.$set(e.row,"file_name",a)},expression:"scope.row.file_name"}}):t._e(),t._v(" "),1==e.row.editMode?a("i",{staticClass:"el-icon-check",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px",color:"#67c23a","padding-left":"5px"},on:{click:function(a){return t.submitEditMode(e.row.id,e.row.file_id,e.row.file_name)}}}):t._e(),t._v(" "),1==e.row.editMode?a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px",color:"#f56c6c","padding-left":"5px"},on:{click:function(a){return t.changeEditMode(e.row.id,"disable")}}}):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"size",label:"大小",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"上传时间",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:"下载",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-download"},on:{click:function(a){return t.download(e.row.file_id)}}})],1),t._v(" "),0==e.row.share?a("el-tooltip",{attrs:{content:"分享",placement:"top"}},[0==e.row.share?a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-share"},on:{click:function(a){return t.share(e.row.id)}}}):t._e()],1):t._e(),t._v(" "),1==e.row.share?a("el-tooltip",{attrs:{content:"复制分享链接",placement:"top"}},[1==e.row.share?a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.share_link,expression:"scope.row.share_link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-link"}}):t._e()],1):t._e(),t._v(" "),1==e.row.share?a("el-tooltip",{attrs:{content:"取消分享",placement:"top"}},[1==e.row.share?a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"warning",icon:"el-icon-close"},on:{click:function(a){return t.unShare(e.row.id)}}}):t._e()],1):t._e(),t._v(" "),a("el-tooltip",{attrs:{content:"删除",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row.id)}}})],1)]}}])})],1)],1),t._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":t.pagination.currentPage,"page-sizes":[5,10,20,30],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationCurrentChange}})],1)])],1)},[],!1,null,null,null);te.options.__file="CloudDrive.vue";var ee=te.exports,ae="/imageHosting/get",ie="/imageHosting/save",se="/imageHosting/delete",ne="/imageHosting/changeName",re={name:"ImageHosting",props:{user_id:Number},components:{},watch:{},data:function(){return{tableData:[],pagination:{currentPage:1,pageSize:10,total:0}}},methods:{paginationCurrentChange:function(t){this.pagination.currentPage=t,this.get()},paginationSizeChange:function(t){this.pagination.pageSize=t,this.get()},uploadSuccess:function(t,e,a){this.save(t.data.id),this.$emit("cloudStatusChanged",0),this.$refs.upload.clearFiles()},uploadProgress:function(){this.$emit("cloudStatusChanged",1)},open:function(t){window.open(t)},submitEditMode:function(t,e){var a=this;return l()(r.a.mark(function i(){var s,n;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,c.a.post(ne,{user_id:a.user_id,id:t,file_name:e});case 3:return s=i.sent,n=s.data,i.next=7,a.changeEditMode(t,"disable");case 7:a.get(),a.$message({message:n.msg,type:"success"}),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(0),console.log(i.t0),a.$message({message:i.t0.response.data.msg,type:"error"});case 15:case"end":return i.stop()}},i,a,[[0,11]])}))()},changeEditMode:function(t,e){for(var a=0;a<this.tableData.length;a++)if(this.tableData[a].id==t){"enable"==e&&(this.tableData[a].editMode=!0),"disable"==e&&(this.tableData[a].editMode=!1),this.$set(this.tableData,a,this.tableData[a]);break}},get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ae,{user_id:t.user_id,pagination_size:t.pagination.pageSize,current_page:t.pagination.currentPage});case 3:for(a=e.sent,i=a.data,t.tableData=i.data.list,s=0;s<t.tableData.length;s++)t.tableData[s].editMode=!1;t.pagination.total=i.data.total,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},save:function(t){var e=this;return l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(ie,{user_id:e.user_id,file_id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])}))()},onCopy:function(t){this.$message({message:"复制分享链接成功！现在就去粘贴吧！",type:"success"})},onError:function(t){alert("复制失败")},del:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗？","提示",{}).then(l()(r.a.mark(function a(){var i,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(se,{user_id:e.user_id,id:t});case 3:i=a.sent,s=i.data,e.$message({message:s.msg,type:"success"}),e.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,e,[[0,9]])})));case 1:case"end":return a.stop()}},a,e)}))()}},mounted:function(){this.get(),this.timer=window.setInterval(this.get,6e4)},beforeDestroy:function(){window.clearInterval(this.timer)}},oe=Object(u.a)(re,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"margin_bottom-large"},[a("div",{staticClass:"margin_left-medium margin_right-medium",staticStyle:{"text-align":"center"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"text-align":"center"},attrs:{drag:"",action:"/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-progress":t.uploadProgress,"on-success":t.uploadSuccess,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload,"on-exceed":t.handleExceed}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n          将图片拖到此处，或\n          "),a("em",[t._v("点击上传")])])])],1)]),t._v(" "),a("el-row",[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{staticClass:"scrollbar-div",staticStyle:{"max-height":"calc(100vh - 435px)",height:"calc(100vh - 435px)"}},[a("el-table",{staticStyle:{"text-align":"center"},attrs:{data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"inline-flex"}},[0==e.row.editMode?a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.file_name))]):t._e(),t._v(" "),0==e.row.editMode?a("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px"},on:{click:function(a){return t.changeEditMode(e.row.id,"enable")}}}):t._e(),t._v(" "),1==e.row.editMode?a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.row.file_name,callback:function(a){t.$set(e.row,"file_name",a)},expression:"scope.row.file_name"}}):t._e(),t._v(" "),1==e.row.editMode?a("i",{staticClass:"el-icon-check",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px",color:"#67C23A","padding-left":"5px"},on:{click:function(a){return t.submitEditMode(e.row.id,e.row.file_name)}}}):t._e(),t._v(" "),1==e.row.editMode?a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer","margin-top":"6px","font-size":"13px",color:"#F56C6C","padding-left":"5px"},on:{click:function(a){return t.changeEditMode(e.row.id,"disable")}}}):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"上传时间",width:"170"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"left",width:"400",trigger:"hover"}},[a("div",{staticStyle:{"text-align":"center",display:"grid"}},[a("img",{staticClass:"image",staticStyle:{"max-height":"300px","max-width":"300px",margin:"0 auto",cursor:"pointer"},attrs:{src:e.row.shorted_link},on:{click:function(a){return t.open(e.row.shorted_link)}}}),t._v(" "),a("div",{staticStyle:{margin:"0 auto",display:"inline-flex"}},[a("i",{staticClass:"el-icon-top",staticStyle:{color:"#303133","padding-top":"0px","margin-top":"12px","margin-bottom":"10px"}}),t._v(" "),a("p",{staticClass:"notesText",staticStyle:{"font-size":"12px",color:"#303133","padding-top":"0px","margin-top":"10px","margin-bottom":"10px"}},[t._v("点击图片以下载原图")])])]),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{slot:"reference",size:"mini",plain:"",type:"primary",icon:"el-icon-download"},on:{click:function(a){return t.download(e.row.file_id)}},slot:"reference"})],1),t._v(" "),a("el-tooltip",{attrs:{content:"复制链接",placement:"top"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.shorted_link,expression:"scope.row.shorted_link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"margin_left-small",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-link"}})],1),t._v(" "),a("el-tooltip",{attrs:{content:"删除",placement:"top"}},[a("el-button",{staticClass:"margin_left-small",attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row.id)}}})],1)]}}])})],1)],1),t._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":t.pagination.currentPage,"page-sizes":[5,10,20,30],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":t.paginationSizeChange,"current-change":t.paginationCurrentChange}})],1)])],1)},[],!1,null,null,null);oe.options.__file="ImageHosting.vue";var le=oe.exports,ce={name:"CloudDriveAndImageHosting",props:{user_id:Number},components:{CloudDrive:ee,ImageHosting:le},watch:{},data:function(){return{activeFunction:"first"}},methods:{cloudStatusChanged:function(t){this.$emit("cloudStatusChanged",t)}},mounted:function(){}},de=Object(u.a)(ce,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-tabs",{staticClass:"margin_bottom-small margin_left-medium margin_right-medium",attrs:{stretch:"true"},on:{"tab-click":t.handleClick},model:{value:t.activeFunction,callback:function(e){t.activeFunction=e},expression:"activeFunction"}},[a("el-tab-pane",{attrs:{label:"网盘",name:"first"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"图床",name:"second"}})],1),t._v(" "),"first"==t.activeFunction?a("CloudDrive",{attrs:{user_id:t.user_id},on:{cloudStatusChanged:t.cloudStatusChanged}}):t._e(),t._v(" "),"second"==t.activeFunction?a("ImageHosting",{attrs:{user_id:t.user_id},on:{cloudStatusChanged:t.cloudStatusChanged}}):t._e()],1)},[],!1,null,null,null);de.options.__file="CloudDrive&ImageHosting.vue";var ue="/login/userLogin",pe="/login/userLoginSalt",me={name:"login",components:{Console:qt,CloudDriveAndImageHosting:de.exports},props:{login_name:String,user_name:String,user_id:Number},data:function(){return{visible:!1,password:"",salt:"",user:"",cloudStatus:0,loading:!1,drawer:{title:"",size:"",visible:!1,direction:"ttb"}}},methods:{md5It:function(t){return t=w()(t)},login:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.login_name&&""!==t.password&&void 0!==t.login_name&&void 0!==t.password&&0!=t.login_name.length&&0!=t.password.length){e.next=4;break}t.$notify.error({message:"请填写用户名和密码",type:"error"}),e.next=29;break;case 4:return t.loading=!0,e.prev=5,e.next=8,c.a.post(pe,{login_name:t.login_name});case 8:return a=e.sent,i=a.data,s={login_name:t.login_name,password:t.md5It(t.md5It(t.md5It(t.password)+i.data.stable_salt)+i.data.salt),is_generate_cookie:!0},e.next=13,c.a.post(ue,s);case 13:n=e.sent,o=n.data,t.visible=!1,t.$message({message:o.msg,type:"success"}),t.$cookies.set("user_key",o.user_key),t.$cookies.set("user_name",_()(o.user_name).replace(/\"/g,"")),t.$cookies.set("login_name",_()(o.login_name).replace(/\"/g,"")),t.$cookies.set("user_id",_()(o.user_id)),location.reload(),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(5),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"}),t.loading=!1;case 29:case"end":return e.stop()}},e,t,[[5,24]])}))()},logout:function(){this.$cookies.remove("user_key"),this.$cookies.remove("user_name"),this.$cookies.remove("login_name"),this.$cookies.remove("user_id"),this.$message({message:"退出成功！",type:"success"}),location.reload()},consoleClicked:function(){this.drawer.title="控制台",this.drawer.size="500",this.drawer.visible=!0,this.drawer.direction="ttb"},cloudClicked:function(){this.drawer.title="网盘 / 图床",this.drawer.size="50%",this.drawer.visible=!0,this.drawer.direction="rtl",this.cloudStatus=0},cloudStatusChanged:function(t){this.cloudStatus=t},drawerBeforeClose:function(t){var e=this;1==this.cloudStatus?this.$confirm("检测到您的文件仍在上传中，关闭页面会打断上传，仍然要关闭吗?","提示",{}).then(function(a){e.drawer.title="",t(),e.cloudStatus=0}):(this.drawer.title="",t())}},created:function(){},mounted:function(){}},ve=(a("1xb6"),Object(u.a)(me,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-button"},[a("el-popover",{directives:[{name:"show",rawName:"v-show",value:0==t.user_id,expression:"user_id == 0"}],staticClass:"login-popover",attrs:{placement:"top",width:"160"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-input",{staticClass:"login_name",attrs:{size:"small",placeholder:"用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.login_name,callback:function(e){t.login_name=e},expression:"login_name"}}),t._v(" "),a("el-input",{staticClass:"password",attrs:{size:"small",placeholder:"密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("el-button",{staticClass:"login",attrs:{loading:t.loading,size:"small",type:"primary"},on:{click:function(e){return t.login()}}},[t._v("登录")])],1),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("登录")])],1),t._v(" "),a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:0!=t.user_id,expression:"user_id != 0"}],staticClass:"user-popover",attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[t._v(t._s(t.user_name))]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.consoleClicked(e)}}},[t._v("控制台")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.cloudClicked(e)}}},[t._v("网盘 / 图床")]),t._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){return t.logout(e)}}},[t._v("退出登录")])],1)],1),t._v(" "),a("el-drawer",{attrs:{title:t.drawer.title,visible:t.drawer.visible,direction:t.drawer.direction,size:t.drawer.size,"before-close":t.drawerBeforeClose},on:{"update:visible":function(e){return t.$set(t.drawer,"visible",e)}}},["控制台"==t.drawer.title?a("Console",{attrs:{user_id:t.user_id,login_name:t.login_name}}):t._e(),t._v(" "),"网盘 / 图床"==t.drawer.title?a("CloudDriveAndImageHosting",{attrs:{user_id:t.user_id},on:{cloudStatusChanged:t.cloudStatusChanged}}):t._e()],1)],1)},[],!1,null,"67bada08",null));ve.options.__file="Login.vue";var ge=ve.exports,he={name:"SlickSort",components:{SlickItem:Pt.SlickItem,SlickList:Pt.SlickList},props:{list:Array,can_be_edit:Boolean},watch:{list:function(t,e){},deep:!0},data:function(){return{}},methods:{edit:function(t,e){this.$emit("edit",t,e)},del:function(t,e){this.list.splice(e,1)},submit:function(){this.$emit("submit",this.list)}}},fe=(a("89bo"),Object(u.a)(he,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("SlickList",{staticClass:"slick_list",attrs:{lockAxis:"y"},model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},t._l(t.list,function(e,i){return a("SlickItem",{key:i,staticClass:"slick_list_item",attrs:{index:i}},[a("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#6a6c70"}}),t._v(" "),a("span",{staticClass:"slick_list_item_span"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"slick_list_item_button"},[t.can_be_edit?a("el-button",{staticClass:"el-icon-setting",attrs:{size:"mini"},on:{click:function(a){return t.edit(e,i)}}}):t._e(),t._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.del(e,i)}}})],1)])}),1)],1),t._v(" "),a("el-row",{staticClass:"margin_top-medium"},[a("el-button",{staticClass:"edit-form-confirm",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)],1)},[],!1,null,"edf8cada",null));fe.options.__file="SlickSort.vue";var _e=fe.exports,be={name:"WidgetButton",props:{buttons:Array},data:function(){return{}},methods:{add:function(){this.$emit("add")},sort:function(){this.$emit("sort")},setting:function(){this.$emit("setting")},notify:function(){this.$emit("notify")},revert:function(){this.$emit("revert")}}},we=(a("uKoy"),Object(u.a)(be,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增",placement:"top"}},[-1!=t.buttons.indexOf("add")?a("el-button",{staticClass:"margin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.add()}}}):t._e()],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑和排序",placement:"top"}},[-1!=t.buttons.indexOf("sort")?a("el-button",{staticClass:"bmargin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(e){return t.sort()}}}):t._e()],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置",placement:"top"}},[-1!=t.buttons.indexOf("setting")?a("el-button",{staticClass:"bmargin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(e){return t.setting()}}}):t._e()],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"推送",placement:"top"}},[-1!=t.buttons.indexOf("notify")?a("el-button",{staticClass:"margin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-bell",circle:""},on:{click:function(e){return t.notify()}}}):t._e()],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"时间机器",placement:"top"}},[-1!=t.buttons.indexOf("revert")?a("el-button",{staticClass:"margin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-refresh-left",circle:""},on:{click:function(e){return t.revert()}}}):t._e()],1)],1)},[],!1,null,"2835a02c",null));we.options.__file="WidgetButton.vue";var ye=we.exports,xe="/weather/get",ke="/weather/check",Ce="/weather/weatherLocationCreate",De="/weather/weatherLocationListEdit",Se="/weather/notifyGet",$e="/weather/notifySet",Ee={name:"weather",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{SlickSort:_e,WidgetButton:ye},watch:{},data:function(){return{locationEdit:{list:[],visible:!1},weathers:[{location:"",weatherForm:{tmp:"-",tmp_min:"-",tmp_max:"-",fl:"-",wind:"-",aqi:"-",tomorrow_tmp_min:"-",tomorrow_tmp_max:"-"},iconfontWeatherClass:"el-icon-more",iconfontAqiClass:"el-icon-more",iconfontTomorrowWeatherClass:"el-icon-more"}],loading:!0,edit:{visible:!1,action:"",location:"",loading:!1},notifyForm:{visible:!1,locations:[],notifyMethodOptions:[{value:1,label:"微信"},{value:2,label:"邮件"}]}}},methods:{add:function(){this.edit.visible=!0,this.edit.action="addLocation"},sort:function(){this.locationEdit.list=[];for(var t=1;t<this.weathers.length;t++)this.locationEdit.list.push({name:this.weathers[t].location});this.locationEdit.visible=!0},notify:function(){this.notifyGet(),this.notifyForm.visible=!0},addNotifyLocation:function(){this.edit.visible=!0,this.edit.action="addNotifyLocation"},removeNotifyLocation:function(t,e){var a=this;this.$confirm("确认删除["+e+"]吗?","提示",{}).then(l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.notifyForm.locations.splice(t,1);case 1:case"end":return e.stop()}},e,a)})))},addSubmit:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.edit.loading=!0,e.next=3,t.locationCheck();case 3:if(e.t0=e.sent,0!=e.t0){e.next=9;break}return t.edit.loading=!1,e.abrupt("return");case 9:"addLocation"==t.edit.action?t.locationAdd():"addNotifyLocation"==t.edit.action&&t.notifyForm.locations.push({location:t.edit.location,notify_method:1,notify_type_ch:[]}),t.edit.loading=!1,t.edit.visible=!1;case 12:case"end":return e.stop()}},e,t)}))()},addClosed:function(){this.edit.location=""},locationEditSubmit:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,i=[],s=0;s<t.length;s++)i.push(t[s].name);return a.next=5,c.a.post(De,{user_id:e.user_id,locations:i});case 5:n=a.sent,o=n.data,e.$message({message:o.msg,type:"success"}),e.locationEdit.visible=!1,e.weatherData(),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 16:case"end":return a.stop()}},a,e,[[0,12]])}))()},locationCheck:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ke,{location:t.edit.location});case 3:return a=e.sent,a.data,e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,t,[[0,8]])}))()},locationAdd:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Ce,{user_id:t.user_id,location:t.edit.location});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.edit.visible=!1,t.weatherData(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},weatherData:function(t){var e=this;return l()(r.a.mark(function t(){var a,i,s,n,o,l,d,u,p,m,v,g,h,f,_,b,w;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.post(xe,{user_id:e.user_id});case 3:for(a=t.sent,i=a.data,e.weathers=[],s=0;s<i.data.length;s++)n=i.data[s],o=n.id,l=n.location,d=n.fl,u=n.tmp,p=n.wind,m=n.cond_code_d,n.cond_txt_d,n.cond_code_n,n.cond_txt_n,v=n.tmp_max,g=n.tmp_min,h=n.tomorrow_cond_code_d,n.tomorrow_cond_txt_d,f=n.tomorrow_tmp_max,_=n.tomorrow_tmp_min,b=n.aqi,w=n.update_time_text,e.weathers.push({weatherForm:{}}),e.weathers[s].weatherForm.tmp=u,e.weathers[s].weatherForm.tmp_min=g,e.weathers[s].weatherForm.tmp_max=v,e.weathers[s].weatherForm.fl=d,e.weathers[s].weatherForm.wind=p,e.weathers[s].weatherForm.aqi=b,e.weathers[s].weatherForm.tomorrow_tmp_min=_,e.weathers[s].weatherForm.tomorrow_tmp_max=f,e.weathers[s].location=l,e.weathers[s].update_time_text=w,e.weathers[s].id=o,e.loading=!1,100==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-qing"),(m>=101&&m<=102||104==m||m>=202&&m<=208)&&(e.weathers[s].iconfontWeatherClass="iconfont icon-duoyun"),103==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-duoyunzhuanyin"),200==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-feng"),201==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-qing"),m>=209&&m<=213&&(e.weathers[s].iconfontWeatherClass="iconfont icon-taifeng"),m>=301&&m<=303&&(e.weathers[s].iconfontWeatherClass="iconfont icon-baoyu"),304!=m&&313!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-bingbao"),300!=m&&305!=m&&309!=m&&314!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-xiaoyu"),306!=m&&315!=m&&399!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-zhongyu"),(m>=307&&m<=308||m>=310&&m<=312||m>=316&&m<=318)&&(e.weathers[s].iconfontWeatherClass="iconfont icon-dayu"),400!=m&&407!=m&&408!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-xiaoxue"),401!=m&&409!=m&&499!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-zhongxue"),402!=m&&410!=m||(e.weathers[s].iconfontWeatherClass="iconfont icon-daxue"),403==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-baoxue"),m>=404&&m<=406&&(e.weathers[s].iconfontWeatherClass="iconfont icon-yujiaxue"),(m>=500&&m<=501||m>=509&&m<=510||m>=514&&m<=515)&&(e.weathers[s].iconfontWeatherClass="iconfont icon-wu"),502==m&&(e.weathers[s].iconfontWeatherClass="iconfont icon-mai"),m>=503&&m<=504&&(e.weathers[s].iconfontWeatherClass="iconfont icon-shachen1"),m>=507&&m<=508&&(e.weathers[s].iconfontWeatherClass="iconfont icon-shachenbao"),b>=100&&(e.weathers[s].iconfontAqiClass="iconfont icon-PM"),b<100&&(e.weathers[s].iconfontAqiClass="iconfont icon-app_icons--"),100==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-qing"),(h>=101&&h<=102||104==h||h>=202&&h<=208)&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-duoyun"),103==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-duoyunzhuanyin"),200==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-feng"),201==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-qing"),h>=209&&h<=213&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-taifeng"),h>=301&&h<=303&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-baoyu"),304!=h&&313!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-bingbao"),300!=h&&305!=h&&309!=h&&314!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-xiaoyu"),306!=h&&315!=h&&399!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-zhongyu"),(h>=307&&h<=308||h>=310&&h<=312||h>=316&&h<=318)&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-dayu"),400!=h&&407!=h&&408!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-xiaoxue"),401!=h&&409!=h&&499!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-zhongxue"),402!=h&&410!=h||(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-daxue"),403==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-baoxue"),h>=404&&h<=406&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-yujiaxue"),(h>=500&&h<=501||h>=509&&h<=510||h>=514&&h<=515)&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-wu"),502==h&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-mai"),h>=503&&h<=504&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-shachen1"),h>=507&&h<=508&&(e.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-shachenbao");e.$emit("done"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:case"end":return t.stop()}},t,e,[[0,10]])}))()},notifyGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=function(t){return"rain"==t?"雨雪":"air"==t?"空气":"temperature"==t?"温度骤变":void 0},e.next=4,c.a.post(Se,{user_id:t.user_id});case 4:for(i=e.sent,s=i.data,n=0;n<s.data.length;n++)s.data[n].notify_type_ch=s.data[n].notify_type.map(a);t.notifyForm.locations=s.data,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},notifySubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=function(t){return"雨雪"==t?"rain":"空气"==t?"air":"温度骤变"==t?"temperature":void 0},i=0;i<t.notifyForm.locations.length;i++)t.notifyForm.locations[i].notify_type=t.notifyForm.locations[i].notify_type_ch.map(a);return console.log(t.notifyForm.locations),e.prev=3,e.next=6,c.a.post($e,{user_id:t.user_id,locations:t.notifyForm.locations});case 6:s=e.sent,n=s.data,t.notifyForm.visible=!1,t.$message({message:n.msg,type:"success"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 16:case"end":return e.stop()}},e,t,[[3,12]])}))()}},created:function(){},mounted:function(){this.weatherData(),this.timer=window.setInterval(this.weatherData,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},ze=(a("YV7q"),Object(u.a)(Ee,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weather"},[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-carousel",{attrs:{height:"250px",trigger:"click",interval:"5000","indicator-position":"outside"}},t._l(t.weathers,function(e){return a("el-carousel-item",{key:e},[a("el-row",{ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:e.weatherForm}},[a("div",{staticClass:"location"},[t._v(t._s(e.location))]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.update_time_text,placement:"right"}},[a("div",{staticClass:"el-icon-info",staticStyle:{"margin-top":"6px","margin-left":"6px"}})])],1),t._v(" "),a("el-row",{ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:e.weatherForm}},[a("td",[a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayWeatherIcon"},[a("i",{class:e.iconfontWeatherClass,staticStyle:{"font-size":"100px"}})]),t._v(" "),a("td",{staticClass:"todayWeatherText"},[a("div",{staticClass:"todayWeatherTextDiv"},[t._v(t._s(e.weatherForm.tmp)+"°C")])])]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayAqiIcon"},[a("i",{class:e.iconfontAqiClass,staticStyle:{"font-size":"50px"}})]),t._v(" "),a("td",{staticClass:"todayAqiText"},[a("div",{staticClass:"todayAqiTextDiv"},[t._v("AQI:"+t._s(e.weatherForm.aqi))])])]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"tomorrowWeatherIcon"},[a("i",{class:e.iconfontTomorrowWeatherClass,staticStyle:{"font-size":"50px"}})]),t._v(" "),a("td",{staticClass:"tomorrowWeatherText"},[a("div",{staticClass:"tomorrowWeatherTextDiv"},[t._v("\n                  明日:"+t._s(e.weatherForm.tomorrow_tmp_min)+"°C ~ "+t._s(e.weatherForm.tomorrow_tmp_max)+"°C\n                ")])])])],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-top":"30px",width:"1px",height:"175px",background:"darkgray","margin-left":"25px","margin-right":"25px"}}),t._v(" "),a("div",{staticClass:"weatherSideText"},[a("td",[a("div",{staticClass:"weatherSideTextDetail"},[t._v("\n                今日: "+t._s(e.weatherForm.tmp_min)+"°C ~ "+t._s(e.weatherForm.tmp_max)+"°C\n              ")]),t._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[t._v("风力: "+t._s(e.weatherForm.wind))]),t._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[t._v("体感: "+t._s(e.weatherForm.fl)+"°C")])])])])],1)}),1)],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"编辑地区",visible:t.locationEdit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.locationEdit,"visible",e)}}},[t.locationEdit.visible?a("SlickSort",{attrs:{list:t.locationEdit.list,can_be_edit:!1},on:{submit:t.locationEditSubmit}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"添加城市",visible:t.edit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},closed:function(e){return t.addClosed()}}},[a("el-form",{ref:"form",attrs:{model:t.edit,size:"mini"}},[a("el-form-item",{attrs:{label:"城市名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"城市名称，如：北京"},model:{value:t.edit.location,callback:function(e){t.$set(t.edit,"location",e)},expression:"edit.location"}})],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.edit.loading,type:"primary",size:"small"},on:{click:function(e){return t.addSubmit()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"天气异常提醒",visible:t.notifyForm.visible},on:{"update:visible":function(e){return t.$set(t.notifyForm,"visible",e)}}},[a("el-row",{staticStyle:{"text-align":"left"}},[a("el-button",{staticClass:"margin_bottom-medium",attrs:{size:"small"},on:{click:function(e){return t.addNotifyLocation()}}},[t._v("添加")])],1),t._v(" "),t._l(t.notifyForm.locations,function(e,i){return a("el-row",{key:e,staticClass:"margin_bottom-small"},[a("el-card",{attrs:{shadow:"never"}},[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:4}},[a("p",{staticClass:"better_font_style bold",staticStyle:{"font-size":"20px","margin-left":"20px"}},[t._v(t._s(e.location))])]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:1}},[a("div",{staticStyle:{float:"left","margin-top":"6px",width:"1px",height:"57px",background:"darkgray","margin-right":"25px"}})]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:17}},[a("el-row",{staticClass:"margin_bottom-medium"},[a("el-col",{staticClass:"better_font_style",staticStyle:{"text-align":"left"},attrs:{span:4}},[t._v("提醒方式")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-select",{attrs:{size:"mini"},model:{value:e.notify_method,callback:function(a){t.$set(e,"notify_method",a)},expression:"notifyLocation.notify_method"}},t._l(t.notifyForm.notifyMethodOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{staticClass:"margin_bottom-medium"},[a("el-col",{staticClass:"better_font_style",staticStyle:{"text-align":"left"},attrs:{span:4}},[t._v("提醒内容")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-checkbox-group",{model:{value:e.notify_type_ch,callback:function(a){t.$set(e,"notify_type_ch",a)},expression:"notifyLocation.notify_type_ch"}},[a("el-checkbox",{attrs:{value:"雨雪",label:"雨雪"}}),t._v(" "),a("el-checkbox",{attrs:{value:"空气",label:"空气"}}),t._v(" "),a("el-checkbox",{attrs:{value:"温度骤变",label:"温度骤变"}})],1)],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:2}},[a("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"25px",color:"#F56C6C"},on:{click:function(a){return t.removeNotifyLocation(i,e.location)}}})])],1)],1)}),t._v(" "),a("p",{staticClass:"notesText margin_top-small",staticStyle:{"text-align":"left","font-size":"12px",color:"#F56C6C","padding-top":"0px","margin-bottom":"0px"}},[t._v('*设置天气异常提醒前，请确定脚本运行平台中的"异常天气推送"脚本正常定时运行')]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.notifyForm.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.notifySubmit()}}},[t._v("确定")])],1)],2)],1)},[],!1,null,"bd6a0fec",null));ze.options.__file="Weather.vue";var Te=ze.exports,Ne="/icon",Fe="/iconCategory",Me={name:"IconComponet",watch:{},data:function(){return{icons:[],iconsRaw:[],iconCategory:{active:"0",data:[]},iconData:[]}},methods:{iconChoosed:function(t){this.$emit("iconName",t)},iconInit:function(){this.iconData=[];for(var t=0;t<Math.floor(this.icons.length/12)+1;t++){this.iconData.push([]);for(var e=0;e<12&&(t!=Math.floor(this.icons.length/12)||e!=this.icons.length%12);e++)this.iconData[this.iconData.length-1].push(this.icons[12*t+e])}},iconGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(Ne);case 3:a=e.sent,i=a.data,t.iconsRaw=i.data,t.icons=t.iconsRaw,t.iconInit(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},iconCategoryGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(Fe);case 3:a=e.sent,i=a.data,t.iconCategory.data=i.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},changeCategory:function(t){var e=Number(t.name);if("0"==t.name)this.icons=this.iconsRaw,this.iconInit();else{this.icons=[];for(var a=0;a<this.iconsRaw.length;a++)this.iconsRaw[a].category==e&&this.icons.push(this.iconsRaw[a]);this.iconInit()}}},mounted:function(){this.iconCategoryGet(),this.iconGet()}},Ie=(a("oH1l"),Object(u.a)(Me,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.changeCategory},model:{value:t.iconCategory.active,callback:function(e){t.$set(t.iconCategory,"active",e)},expression:"iconCategory.active"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._v(" "),t._l(t.iconCategory.data,function(t){return a("el-tab-pane",{key:t,attrs:{label:t.name,name:t.id}})})],2),t._v(" "),t._l(t.iconData,function(e){return a("el-row",{key:e,staticClass:"margin_bottom-medium"},t._l(e,function(e){return a("el-col",{key:e,attrs:{span:2}},[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return t.iconChoosed(e.name)}}},[a("i",{class:e.name+" icon-medium"})])],1)}),1)})],2)},[],!1,null,"46027464",null));Ie.options.__file="Icon.vue";var Oe=Ie.exports,Pe="/bookmarks/get",Le="/bookmarks/bookmarksAdd",Re="/bookmarks/bookmarksEdit",Ae={name:"bookmarks",props:{user_id:Number,widget_id:Number,buttons:Array},components:{IconComponet:Oe,SlickSort:_e,WidgetButton:ye},data:function(){return{bookmarksDataRaw:[],bookmarksSuites:[],bookmarksEdit:{visible:!1,list:[]},bookmarksEditForm:{visible:!1,name:"",url:"https://",icon:""},bookmarksEditTempIndex:0,icon:{visible:!1}}},methods:{bookmarksClicked:function(t){window.open(t)},bookmarksSuitesGenerate:function(){for(var t=[],e=[],a=0;a<this.bookmarksDataRaw.length;a+=5){t.push([]);for(var i=0;i<5;i++)void 0!=this.bookmarksDataRaw[a+i]&&t[t.length-1].push(this.bookmarksDataRaw[a+i])}for(var s=0;s<t.length;s+=3){e.push([]);for(var n=0;n<3;n++)e[e.length-1].push(t[s+n])}this.bookmarksSuites=e},bookmarksGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Pe,{user_id:t.user_id});case 3:a=e.sent,i=a.data,t.bookmarksDataRaw=i.data,t.bookmarksSuitesGenerate(),t.$emit("done"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},bookmarksEditFormConfirmClicked:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("新增书签"!=t.bookmarksEditForm.title){e.next=16;break}return e.prev=1,e.next=4,c.a.post(Le,{url:t.bookmarksEditForm.url,name:t.bookmarksEditForm.name,icon:t.bookmarksEditForm.icon,user_id:t.user_id});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.bookmarksGet(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:e.next=17;break;case 16:"编辑书签"==t.bookmarksEditForm.title&&(s=t.bookmarksEditTempIndex,t.bookmarksEdit.list[s].url=t.bookmarksEditForm.url,t.bookmarksEdit.list[s].name=t.bookmarksEditForm.name,t.bookmarksEdit.list[s].icon=t.bookmarksEditForm.icon);case 17:t.bookmarksEditForm.visible=!1;case 18:case"end":return e.stop()}},e,t,[[1,10]])}))()},add:function(){this.bookmarksEditForm={title:"新增书签",visible:!0,name:"",url:"https://",icon:""}},sort:function(){this.bookmarksEdit.list=bt(this.bookmarksDataRaw),this.bookmarksEdit.visible=!0},bookmarksEditSubmit:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<t.length;i++)t[i].order=i+1;return a.prev=1,a.next=4,c.a.post(Re,{bookmarks:t,user_id:e.user_id});case 4:s=a.sent,n=s.data,e.$message({message:n.msg,type:"success"}),e.bookmarksEdit.visible=!1,e.bookmarksGet(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,e,[[1,11]])}))()},bookmarksSetting:function(t,e){this.bookmarksEditTempIndex=e,this.bookmarksEditForm={title:"编辑书签",visible:!0,name:t.name,url:t.url,icon:t.icon}},iconChoose:function(){this.icon.visible=!0},iconNameGet:function(t){this.bookmarksEditForm.icon=t,this.icon.visible=!1}},mounted:function(){this.bookmarksGet()}},Ge=(a("XX29"),Object(u.a)(Ae,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bookmarks-main"},[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"widget-label"},[t._v("书签")])]),t._v(" "),a("div",{staticClass:"bookmarks-data-row-main"},[a("el-carousel",{attrs:{height:"198px",trigger:"click",autoplay:!1,"indicator-position":"outside"}},t._l(t.bookmarksSuites,function(e){return a("el-carousel-item",{key:e},[a("div",{staticStyle:{"margin-left":"5%","margin-right":"5%"}},t._l(e,function(e){return a("el-row",{key:e,staticClass:"margin_bottom-medium"},t._l(e,function(e){return a("el-col",{key:e,attrs:{span:5}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.name,placement:"top"}},[a("el-button",{staticStyle:{color:"#606266","text-overflow":"ellipsis","white-space":"nowrap","max-width":"80%",width:"80%",height:"47px",overflow:"hidden"},attrs:{size:"mini"},on:{click:function(a){return t.bookmarksClicked(e.url)}}},[a("i",{class:e.icon,staticStyle:{"font-size":"12px"}}),t._v("\n                    "+t._s(e.name)+"\n                  ")])],1)],1)}),1)}),1)])}),1)],1)],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:t.bookmarksEditForm.title,visible:t.bookmarksEditForm.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.bookmarksEditForm,"visible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.bookmarksEditForm,size:"mini"}},[a("el-form-item",{attrs:{label:"网站名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"网站名称"},model:{value:t.bookmarksEditForm.name,callback:function(e){t.$set(t.bookmarksEditForm,"name",e)},expression:"bookmarksEditForm.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"网站链接"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"链接(需要完整填写，包括'http://')"},model:{value:t.bookmarksEditForm.url,callback:function(e){t.$set(t.bookmarksEditForm,"url",e)},expression:"bookmarksEditForm.url"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"图标名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"图标名称",disabled:""},model:{value:t.bookmarksEditForm.icon,callback:function(e){t.$set(t.bookmarksEditForm,"icon",e)},expression:"bookmarksEditForm.icon"}}),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.iconChoose()}}},[t._v("选择图标")])],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.bookmarksEditFormConfirmClicked()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑书签",visible:t.bookmarksEdit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.bookmarksEdit,"visible",e)}}},[t.bookmarksEdit.visible?a("SlickSort",{attrs:{list:t.bookmarksEdit.list,can_be_edit:!0},on:{submit:t.bookmarksEditSubmit,edit:t.bookmarksSetting}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"选择喜欢的图标",visible:t.icon.visible,width:"70%"},on:{"update:visible":function(e){return t.$set(t.icon,"visible",e)}}},[a("IconComponet",{on:{iconName:t.iconNameGet}})],1)],1)},[],!1,null,"0fdb078f",null));Ge.options.__file="Bookmarks.vue";var We=Ge.exports,Be="/push/get",Ve="/push/add",je="/push/edit",Ue={name:"PushEdit",props:{user_id:Number,widget_id:Number},data:function(){return{id:0,buttonLoading:!1,notifyData:{form:{notify:{select:0,options:[{value:0,label:"否"},{value:1,label:"是"}]},notifyMethod:{select:1,options:[{value:1,label:"微信"},{value:2,label:"邮件"}]},triggerDate:"",triggerTime:"",interval:{value:"",unit:{select:1,options:[{value:0,label:"分钟"},{value:1,label:"小时"},{value:2,label:"天"}]}}}}}},methods:{get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Be,{user_id:t.user_id,widget_id:t.widget_id});case 3:if(a=e.sent,0!=(i=a.data).data.length){e.next=12;break}return s=new Date,t.notifyData.form.triggerDate=wt(new Date(s.getTime()+864e5)),t.notifyData.form.triggerTime="08:00",e.abrupt("return");case 12:t.id=i.data.id,t.notifyData.form.notify.select=i.data.notify,t.notifyData.form.notifyMethod.select=i.data.notify_method,t.notifyData.form.triggerDate=i.data.notify_trigger_time.split(" ")[0],t.notifyData.form.triggerTime=i.data.notify_trigger_time.split(" ")[1].substr(0,5),t.notifyData.form.interval.value=i.data.notify_interval_raw,t.notifyData.form.interval.unit.select=i.data.notify_interval_unit;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 25:case"end":return e.stop()}},e,t,[[0,21]])}))()},edit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.buttonLoading=!0,0==t.id){e.next=12;break}return e.next=5,c.a.post(je,{id:t.id,user_id:t.user_id,widget_id:t.widget_id,notify:t.notifyData.form.notify.select,notify_method:t.notifyData.form.notifyMethod.select,notify_interval_raw:Number(t.notifyData.form.interval.value),notify_interval_unit:t.notifyData.form.interval.unit.select,notify_trigger_time:t.notifyData.form.triggerDate+" "+t.notifyData.form.triggerTime});case 5:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.buttonLoading=!1,t.$emit("done"),e.next=20;break;case 12:if(0!=t.id){e.next=20;break}return e.next=15,c.a.post(Ve,{id:t.id,user_id:t.user_id,widget_id:t.widget_id,notify:t.notifyData.form.notify.select,notify_method:t.notifyData.form.notifyMethod.select,notify_interval_raw:Number(t.notifyData.form.interval.value),notify_interval_unit:t.notifyData.form.interval.unit.select,notify_trigger_time:t.notifyData.form.triggerDate+" "+t.notifyData.form.triggerTime});case 15:s=e.sent,n=s.data,t.$message({message:n.msg,type:"success"}),t.buttonLoading=!1,t.$emit("done");case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),t.buttonLoading=!1,console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 27:case"end":return e.stop()}},e,t,[[0,22]])}))()}},mounted:function(){this.get()}},qe=(a("8Vg0"),Object(u.a)(Ue,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"form",staticClass:"padding_bottom-medium",attrs:{model:t.notifyData.form,size:"mini"}},[a("el-form-item",{attrs:{label:"是否推送"}},[a("div",{staticClass:"div-flex"},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:t.notifyData.form.notify.select,callback:function(e){t.$set(t.notifyData.form.notify,"select",e)},expression:"notifyData.form.notify.select"}},t._l(t.notifyData.form.notify.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"推送方式"}},[a("div",{staticClass:"div-flex",staticStyle:{width:"324px"}},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:t.notifyData.form.notifyMethod.select,callback:function(e){t.$set(t.notifyData.form.notifyMethod,"select",e)},expression:"notifyData.form.notifyMethod.select"}},t._l(t.notifyData.form.notifyMethod.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"提醒间隔"}},[a("div",{staticClass:"div-flex"},[a("div",[t._v("每")]),t._v(" "),a("el-input",{staticClass:"main_input--tiny inline_margin--small",attrs:{placeholder:"请输入",size:"small"},model:{value:t.notifyData.form.interval.value,callback:function(e){t.$set(t.notifyData.form.interval,"value",e)},expression:"notifyData.form.interval.value"}}),t._v(" "),a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:t.notifyData.form.interval.unit.select,callback:function(e){t.$set(t.notifyData.form.interval.unit,"select",e)},expression:"notifyData.form.interval.unit.select"}},t._l(t.notifyData.form.interval.unit.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"在此时间后开始推送"}},[a("div",{staticClass:"div-flex"},[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:t.notifyData.form.triggerDate,callback:function(e){t.$set(t.notifyData.form,"triggerDate",e)},expression:"notifyData.form.triggerDate"}}),t._v(" "),a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:t.notifyData.form.triggerTime,callback:function(e){t.$set(t.notifyData.form,"triggerTime",e)},expression:"notifyData.form.triggerTime"}})],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.buttonLoading,type:"primary",size:"small"},on:{click:function(e){return t.edit()}}},[t._v("确定")])],1)],1)},[],!1,null,"1a8fa16b",null));qe.options.__file="PushEdit.vue";var He=qe.exports,Ke="/app/get",Ye="/app/add",Xe="/app/edit",Je={name:"appPriceMonitor",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Boolean},components:{SlickSort:_e,WidgetButton:ye,PushEdit:He},watch:{flush:function(t,e){t&&this.appGet()}},data:function(){return{appSortEdit:{visible:!1,list:[]},notifyVisible:!1,appRawData:[],appSuite:[],edit:{searchFormTitle:"",searchFormVisible:!1,searchLoading:!1,searchContent:"",searchArea:"cn",searchResultList:[],chooseFormVisible:!1,chooseFormTitle:"",form:{index:"",name:"",url:"",expect_price:0}}}},methods:{add:function(){this.edit.searchFormTitle="查找App",this.edit.searchFormVisible=!0},open:function(t){window.open(t)},choosed:function(t,e){this.edit.form.name=t,this.edit.form.url=e,this.edit.chooseFormTitle="新增App",this.edit.chooseFormVisible=!0},searchFormClosed:function(t){this.edit.searchContent="",this.edit.searchResultList=[],t()},notify:function(){this.notifyVisible=!this.notifyVisible},sort:function(){this.appSortEdit.visible=!0,this.appSortEdit.list=bt(this.appRawData)},appSortEditSetting:function(t,e){this.edit.chooseFormTitle="编辑App",this.edit.form.name=t.name,this.edit.form.url=t.url,this.edit.form.expect_price=t.expect_price,this.edit.form.index=e,this.edit.chooseFormVisible=!0},search:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.edit.searchLoading=!0,a="https://itunes.apple.com/search?term="+t.edit.searchContent+"&country="+t.edit.searchArea+"&media=software",e.next=5,c.a.get(a);case 5:i=e.sent,s=i.data,t.edit.searchResultList=s.results,t.edit.searchLoading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:case"end":return e.stop()}},e,t,[[0,11]])}))()},appGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Ke,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.appRawData=i.data,s=5,n=[],o=0;o<i.data.length;o+=s)for(n.push([]),l=0;l<s;l++)void 0!=i.data[o+l]&&n[n.length-1].push(i.data[o+l]);t.appSuite=n,t.$emit("done"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 17:case"end":return e.stop()}},e,t,[[0,13]])}))()},editSubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("新增App"!=t.edit.chooseFormTitle){e.next=18;break}return e.prev=1,e.next=4,c.a.post(Ye,{user_id:t.user_id,name:t.edit.form.name,url:t.edit.form.url,expect_price:t.edit.form.expect_price});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.appGet(),t.edit.chooseFormVisible=!1,t.edit.searchFormVisible=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 16:e.next=19;break;case 18:(t.edit.chooseFormTitle="编辑App")&&(s=t.edit.form.index,t.appSortEdit.list[s].name=t.edit.form.name,t.appSortEdit.list[s].url=t.edit.form.url,t.appSortEdit.list[s].expect_price=t.edit.form.expect_price,t.$message({message:"成功！",type:"success"}),t.edit.chooseFormVisible=!1,t.edit.searchFormVisible=!1);case 19:case"end":return e.stop()}},e,t,[[1,12]])}))()},appSortEditSubmit:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<t.length;i++)t[i].order=i+1;return a.prev=1,a.next=4,c.a.post(Xe,{apps:t,user_id:e.user_id});case 4:s=a.sent,n=s.data,e.$message({message:n.msg,type:"success"}),e.appSortEdit.visible=!1,e.appGet(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,e,[[1,11]])}))()}},mounted:function(){this.appGet(),this.timer=window.setInterval(this.appGet,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},Ze=(a("Pr1N"),Object(u.a)(Je,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"widget-label"},[t._v("APP")])]),t._v(" "),a("el-carousel",{attrs:{height:"224px",trigger:"click",interval:"5000","indicator-position":"outside"}},t._l(t.appSuite,function(e){return a("el-carousel-item",{key:e},[a("el-table",{staticStyle:{width:"100%","max-height":"224px",overflow:"auto"},attrs:{data:e,size:"mini"}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"当前价格",width:"75"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"150"}})],1)],1)}),1)],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:t.edit.searchFormTitle,visible:t.edit.searchFormVisible,"before-close":t.searchFormClosed,width:"60%"},on:{"update:visible":function(e){return t.$set(t.edit,"searchFormVisible",e)}}},[a("el-input",{staticClass:"margin_bottom-medium",attrs:{placeholder:"请输入内容",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.edit.searchContent,callback:function(e){t.$set(t.edit,"searchContent",e)},expression:"edit.searchContent"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend",placeholder:"请选择",size:"small"},slot:"prepend",model:{value:t.edit.searchArea,callback:function(e){t.$set(t.edit,"searchArea",e)},expression:"edit.searchArea"}},[a("el-option",{attrs:{label:"国区",value:"cn"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(e){return t.search()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.edit.searchLoading,expression:"edit.searchLoading"}],staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:t.edit.searchResultList,stripe:""}},[a("el-table-column",{attrs:{prop:"trackName",label:"名称",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{effect:"dark",content:e.row.description,placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",type:"text"},on:{click:function(a){return t.open(e.row.trackViewUrl)}}},[t._v(t._s(e.row.trackName))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"formattedPrice",label:"价格",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"genres",label:"类别",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.genres,function(e){return a("span",{key:e,staticClass:"noMargin",attrs:{size:"mini"}},[t._v("\n            "+t._s(e)+"\n          ")])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"artistName",label:"开发者"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.choosed(e.row.trackName,e.row.trackViewUrl)}}},[t._v("选择")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.edit.chooseFormTitle,visible:t.edit.chooseFormVisible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.edit,"chooseFormVisible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.edit.form,size:"mini"}},[a("el-form-item",{attrs:{label:"App名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"名称"},model:{value:t.edit.form.name,callback:function(e){t.$set(t.edit.form,"name",e)},expression:"edit.form.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"AppURL"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"App Store链接(如：'https://apps.apple.com/cn/app/id958955657')"},model:{value:t.edit.form.url,callback:function(e){t.$set(t.edit.form,"url",e)},expression:"edit.form.url"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"期望价格"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"当小于期望价格时，如果设置了通知，会发送提醒"},model:{value:t.edit.form.expect_price,callback:function(e){t.$set(t.edit.form,"expect_price",e)},expression:"edit.form.expect_price"}})],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editSubmit()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:t.notifyVisible,width:"40%"},on:{"update:visible":function(e){t.notifyVisible=e}}},[t.notifyVisible?a("PushEdit",{attrs:{user_id:t.user_id,widget_id:t.widget_id},on:{done:function(e){return t.notify()}}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑App",visible:t.appSortEdit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.appSortEdit,"visible",e)}}},[t.appSortEdit.visible?a("SlickSort",{attrs:{list:t.appSortEdit.list,can_be_edit:!0},on:{submit:t.appSortEditSubmit,edit:t.appSortEditSetting}}):t._e()],1)],1)},[],!1,null,"4bcf9e77",null));Ze.options.__file="AppMonitor.vue";var Qe=Ze.exports,ta="/gold/get",ea="/gold/edit",aa={name:"gold",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{WidgetButton:ye,PushEdit:He},watch:{},data:function(){return this.chartSettings={min:["dataMin"],max:["dataMax"]},{name:"黄金价格",chartData:{columns:[],rows:[]},notifyVisible:!1,settingForm:{visible:!1,pushThresholdMin:0,pushThresholdMax:0}}},methods:{notify:function(){this.notifyVisible=!this.notifyVisible},setting:function(){this.settingForm.visible=!0},settingConfirm:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ea,{user_id:t.user_id,threshold_min:t.settingForm.pushThresholdMin,threshold_max:t.settingForm.pushThresholdMax});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.goldPriceGet(),t.settingForm.visible=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},goldPriceGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ta,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.chartData.rows=[],t.chartData.columns=["日期","价格"],s=0;s<i.data.price_list.length;s++)t.chartData.rows.push({"日期":i.data.price_list[s].update_time,"价格":i.data.price_list[s].price});t.$nextTick(function(e){t.$refs.chart.echarts.resize()}),0!=i.data.threshold.length&&(t.settingForm.pushThresholdMin=i.data.threshold[0],t.settingForm.pushThresholdMax=i.data.threshold[1]),t.$emit("done"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 17:case"end":return e.stop()}},e,t,[[0,13]])}))()}},mounted:function(){this.goldPriceGet(),this.timer=window.setInterval(this.goldPriceGet,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},ia=Object(u.a)(aa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gold-main"},[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"widget-label"},[t._v("黄金价格")])]),t._v(" "),a("ve-line",{ref:"chart",attrs:{height:"228px",settings:t.chartSettings,data:t.chartData,"legend-visible":!1}})],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()},setting:function(e){return t.setting()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:t.notifyVisible,width:"40%"},on:{"update:visible":function(e){t.notifyVisible=e}}},[t.notifyVisible?a("PushEdit",{attrs:{user_id:t.user_id,widget_id:t.widget_id},on:{done:function(e){return t.notify()}}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"修改提醒阈值",visible:t.settingForm.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.settingForm,"visible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.settingForm,size:"mini"}},[a("el-form-item",{attrs:{label:"当价格不在此范围内时提醒我"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"最小值"},model:{value:t.settingForm.pushThresholdMin,callback:function(e){t.$set(t.settingForm,"pushThresholdMin",e)},expression:"settingForm.pushThresholdMin"}}),t._v("~\n          "),a("el-input",{attrs:{size:"mini",placeholder:"最大值"},model:{value:t.settingForm.pushThresholdMax,callback:function(e){t.$set(t.settingForm,"pushThresholdMax",e)},expression:"settingForm.pushThresholdMax"}})],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.settingConfirm()}}},[t._v("确定")])],1)],1)],1)},[],!1,null,null,null);ia.options.__file="GoldPrice.vue";var sa=ia.exports,na="/notes/get",ra="/notes/save",oa="/notes/notify",la="/notes/revert",ca={name:"notes",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{WidgetButton:ye},data:function(){return{notesData:[],activeNote:"",edit:{noteIndex:Number,visible:!1,dialogTitle:"",title:"",content:""},notify:{visible:!1,form:{title:"",content:"",notifyMethod:{select:1,options:[{value:1,label:"微信"},{value:2,label:"邮件"}]},triggerDate:"",triggerTime:""}},revert:{visible:!1,data:[]}}},methods:{actionClicked:function(t){"edit"==t&&this.editClicked(this.activeNote),"bell"==t&&this.notifyClicked(this.activeNote),"delete"==t&&this.del(this.activeNote)},notesGetIndex:function(t){for(var e=0;e<this.notesData.length;e++)if(this.notesData[e].token==t)return e;return null},notesGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(na,{user_id:t.user_id});case 3:if(a=e.sent,i=a.data,t.notesData=i.data,0!=t.notesData.length)for(t.activeNote=t.notesData[0].token,s=0;s<t.notesData.length;s++)t.notesData[s].content.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;");t.$emit("done"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},notesSave:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(ra,{user_id:t.user_id,notes:t.notesData});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},add:function(){this.edit.dialogTitle="新建";var t=new Date;this.edit.title=t.getMonth()+1+"."+t.getDate(),this.edit.content="",this.edit.visible=!0},del:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(l()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.notesGetIndex(t),e.edit.noteIndex=i,e.notesData.splice(i,1),a.next=5,e.notesSave();case 5:return a.next=7,e.notesGet();case 7:case"end":return a.stop()}},a,e)})));case 1:case"end":return a.stop()}},a,e)}))()},editClicked:function(t){var e=this.notesGetIndex(t);this.edit.noteIndex=e,this.edit.dialogTitle="编辑",this.edit.title=this.notesData[e].name,this.edit.content=this.notesData[e].content,this.edit.visible=!0},editSubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"编辑"==t.edit.dialogTitle?(t.notesData[t.edit.noteIndex].title=t.edit.title,t.notesData[t.edit.noteIndex].content=t.edit.content):"新建"==t.edit.dialogTitle&&(a=(new Date).getTime(),i=Math.floor(1e16*Math.random()),t.notesData.push({name:t.edit.title,content:t.edit.content,token:String(a)+String(i)})),e.next=3,t.notesSave();case 3:return e.next=5,t.notesGet();case 5:t.edit.visible=!1;case 6:case"end":return e.stop()}},e,t)}))()},notifyClicked:function(t){var e=this.notesGetIndex(t);this.notify.form.title=this.notesData[e].name,this.notify.form.content=this.notesData[e].content,this.notify.visible=!0},notifySubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(oa,{user_id:t.user_id,title:t.notify.form.title,content:t.notify.form.content,method:t.notify.form.notifyMethod.select,notify_trigger_time:t.notify.form.triggerDate+" "+t.notify.form.triggerTime});case 3:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.notify.visible=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},revertClicked:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(la,{user_id:t.user_id});case 3:a=e.sent,i=a.data,t.revert.data=i.data,t.revert.visible=!0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},revertConfirm:function(t,e){var a=this;return l()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a.$confirm("确认使用时间机器恢复至["+t+"]的版本吗?","提示",{}).then(l()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.notesData=e,t.next=3,a.notesSave();case 3:return t.next=5,a.notesGet();case 5:a.revert.visible=!1;case 6:case"end":return t.stop()}},t,a)})));case 1:case"end":return i.stop()}},i,a)}))()}},mounted:function(){this.notesGet(),this.timer=window.setInterval(this.notesGet,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},da=(a("DiuX"),Object(u.a)(ca,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"widget-label"},[t._v("便签")])]),t._v(" "),a("el-tabs",{staticStyle:{"max-height":"250px"},attrs:{"tab-position":"left"},model:{value:t.activeNote,callback:function(e){t.activeNote=e},expression:"activeNote"}},t._l(t.notesData,function(e){return a("el-tab-pane",{key:e,staticClass:"scrollbar-div",staticStyle:{"padding-left":"0px"},attrs:{label:e.name,name:e.token}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.activeNote==e.token,expression:"activeNote == singleNotesData.token"}],attrs:{size:"small","show-timeout":"50",placement:"bottom"},on:{command:t.actionClicked}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more",staticStyle:{"margin-right":"4px"}})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticStyle:{color:"#409eff"},attrs:{command:"edit",icon:"el-icon-edit"}},[t._v("编辑")]),t._v(" "),a("el-dropdown-item",{staticStyle:{color:"#e6a23c"},attrs:{command:"bell",icon:"el-icon-bell"}},[t._v("提醒")]),t._v(" "),a("el-dropdown-item",{staticStyle:{color:"#f56c6c"},attrs:{command:"delete",icon:"el-icon-delete"}},[t._v("删除")])],1)],1),t._v("\n          "+t._s(e.name)+"\n        ")],1),t._v(" "),a("p",{staticClass:"notesText scrollbar-div",staticStyle:{"padding-right":"10px","max-width":"93%","max-height":"250px","min-height":"250px"}},[t._v("\n          "+t._s(e.content)+"\n        ")])])}),1)],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},revert:function(e){return t.revertClicked()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:t.edit.dialogTitle,visible:t.edit.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)}}},[a("div",{staticClass:"div-flex"},[a("div",{staticClass:"notesEditFormLabel"},[t._v("标题：")]),t._v(" "),a("el-input",{staticClass:"margin_bottom-medium",staticStyle:{width:"80%"},attrs:{size:"small",placeholder:"请输入便签标题"},model:{value:t.edit.title,callback:function(e){t.$set(t.edit,"title",e)},expression:"edit.title"}})],1),t._v(" "),a("div",{staticClass:"div-flex"},[a("div",{staticClass:"notesEditFormLabel"},[t._v("内容：")]),t._v(" "),a("el-input",{staticClass:"margin_bottom-large",staticStyle:{width:"80%"},attrs:{type:"textarea",size:"small",autosize:"",placeholder:"请输入便签内容"},model:{value:t.edit.content,callback:function(e){t.$set(t.edit,"content",e)},expression:"edit.content"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.edit.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.editSubmit()}}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:t.notify.visible},on:{"update:visible":function(e){return t.$set(t.notify,"visible",e)}}},[a("el-form",{ref:"form",staticClass:"padding_bottom-medium",attrs:{model:t.notify.form,size:"mini"}},[a("el-form-item",{attrs:{label:"标题"}},[a("p",{staticClass:"notesText",staticStyle:{"font-size":"14px","padding-top":"0px","margin-top":"0px","line-height":"28px","margin-bottom":"0px"}},[t._v("\n          "+t._s(t.notify.form.title)+"\n        ")])]),t._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("p",{staticClass:"notesText",staticStyle:{"font-size":"14px","margin-left":"40px","line-height":"28px","padding-top":"0px","margin-top":"0px","margin-bottom":"0px"}},[t._v("\n          "+t._s(t.notify.form.content)+"\n        ")])]),t._v(" "),a("el-form-item",{attrs:{label:"提醒方式"}},[a("div",{staticClass:"div-flex",staticStyle:{width:"324px"}},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:t.notify.form.notifyMethod.select,callback:function(e){t.$set(t.notify.form.notifyMethod,"select",e)},expression:"notify.form.notifyMethod.select"}},t._l(t.notify.form.notifyMethod.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"提醒时间"}},[a("div",{staticClass:"div-flex"},[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:t.notify.form.triggerDate,callback:function(e){t.$set(t.notify.form,"triggerDate",e)},expression:"notify.form.triggerDate"}}),t._v(" "),a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"01:00",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:t.notify.form.triggerTime,callback:function(e){t.$set(t.notify.form,"triggerTime",e)},expression:"notify.form.triggerTime"}})],1)]),t._v(" "),a("p",{staticClass:"notesText",staticStyle:{"font-size":"12px",color:"#f56c6c","padding-top":"0px","margin-top":"0px","margin-bottom":"0px"}},[t._v("\n        *提交后不能取消，但可以多次提交。\n      ")])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.notify.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.notifySubmit()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"时间机器",visible:t.revert.visible},on:{"update:visible":function(e){return t.$set(t.revert,"visible",e)}}},[a("p",{staticClass:"notesText",staticStyle:{"font-size":"12px",color:"#f56c6c","padding-top":"0px","margin-top":"0px","margin-bottom":"0px"}},[t._v("\n      *可以恢复到最近的五个版本中的任意一个，此操作不会对过去的版本产生影响，而是会使用以前版本的内容生成一个新版本。\n    ")]),t._v(" "),a("el-table",{staticStyle:{"text-align":"center","margin-bottom":"20px"},attrs:{data:t.revert.data,size:"small"}},[a("el-table-column",{attrs:{prop:"update_time",label:"版本"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user",label:"创建人",width:"100"}}),t._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",width:"350",trigger:"hover"}},[a("el-table",{staticStyle:{"text-align":"center"},attrs:{data:e.row.detail,size:"small"}},[a("el-table-column",{attrs:{prop:"name",width:"100",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.content.length<25?a("span",[t._v(t._s(e.row.content))]):t._e(),t._v(" "),a("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover",content:e.row.content}},[e.row.content.length>=25?a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.content.substring(0,25)+"..."))]):t._e()])]}}],null,!0)})],1),t._v(" "),a("el-button",{staticClass:"noMargin",attrs:{slot:"reference",size:"mini",plain:"",type:"primary"},on:{click:function(a){return t.revertConfirm(e.row.update_time,e.row.detail)}},slot:"reference"},[t._v("恢复至此版本")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.revert.visible=!1}}},[t._v("取消")])],1)],1)],1)},[],!1,null,"5d586dc0",null));da.options.__file="Notes.vue";var ua=da.exports,pa="/translator/translate",ma={name:"translator",watch:{},data:function(){return{loading:!1,options:[{value:"zh",label:"简体中文"},{value:"en",label:"英语"},{value:"ru",label:"俄语"},{value:"es",label:"西班牙语"},{value:"fr",label:"法语"},{value:"ar",label:"阿拉伯语"},{value:"tr",label:"土耳其语"},{value:"pt",label:"葡萄牙语"},{value:"it",label:"意大利语"},{value:"th",label:"泰语"},{value:"id",label:"印度尼西亚语"},{value:"vi",label:"越南语"}],fromLanguage:"zh",toLanguage:"en",rawText:"",translatedText:""}},methods:{exchangeLanguage:function(){var t=this.fromLanguage;this.fromLanguage=this.toLanguage,this.toLanguage=t,this.translate()},exchangeText:function(){var t=this.rawText;this.rawText=this.translatedText,this.translatedText=t,this.translate()},changed:function(){clearTimeout(this.timer),this.timer=setTimeout(this.translate,500)},translate:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=t.rawText&&""!=t.rawText&&null!=t.rawText){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.loading=!0,e.next=6,c.a.post(pa,{to_language:t.toLanguage,text:t.rawText});case 6:a=e.sent,i=a.data,t.translatedText=i.data,t.loading=!1,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"}),t.loading=!1;case 17:case"end":return e.stop()}},e,t,[[2,12]])}))()}},mounted:function(){this.$emit("done")}},va=Object(u.a)(ma,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",{staticClass:"div-flex"},[a("div",{staticClass:"widget-label"},[t._v("翻译")]),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"el-icon-loading widget-label",staticStyle:{"padding-top":"3px"}})])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){return t.translate()}},model:{value:t.fromLanguage,callback:function(e){t.fromLanguage=e},expression:"fromLanguage"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-top":"5px",cursor:"pointer"},on:{click:function(e){return t.exchangeLanguage()}}})]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:function(e){return t.translate()}},model:{value:t.toLanguage,callback:function(e){t.toLanguage=e},expression:"toLanguage"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{"min-height":"232px","max-height":"232px"},attrs:{type:"textarea",resize:"none",autosize:{minRows:10,maxRows:10},placeholder:"请输入内容"},on:{input:function(e){return t.changed()}},model:{value:t.rawText,callback:function(e){t.rawText=e},expression:"rawText"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-top":"5px",cursor:"pointer"},on:{click:function(e){return t.exchangeText()}}})]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{"min-height":"232px","max-height":"232px"},attrs:{type:"textarea",resize:"none",autosize:{minRows:10,maxRows:10},placeholder:""},model:{value:t.translatedText,callback:function(e){t.translatedText=e},expression:"translatedText"}})],1)],1)],1)},[],!1,null,null,null);va.options.__file="Translator.vue";var ga=va.exports,ha="/wallpapers/get",fa={name:"wallpapers",data:function(){return{wallpapersData:[]}},methods:{wallpapersGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(ha);case 3:a=e.sent,i=a.data,t.wallpapersData=i.data,t.$emit("done"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},open:function(t){window.open(t)}},mounted:function(){this.wallpapersGet()}},_a=(a("LsVI"),Object(u.a)(fa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-carousel",{staticStyle:{height:"100%","overflow-y":"hidden"},attrs:{trigger:"click",autoplay:!0,interval:5e3,"indicator-position":"outside"}},t._l(t.wallpapersData,function(e){return a("el-carousel-item",{key:e},[a("div",[a("img",{staticClass:"image",attrs:{src:e.url},on:{click:function(a){return t.open(e.url)}}}),t._v(" "),a("div",{staticStyle:{height:"30px","margin-top":"10px"}},[a("span",{staticClass:"better_font_style",staticStyle:{"font-size":"15px"}},[t._v(t._s(e.copyright))]),t._v(" "),a("span",{staticStyle:{color:"#409eff","font-size":"15px",cursor:"pointer","margin-left":"10px"},on:{click:function(a){return t.open(e.copyrightlink)}}},[t._v("了解更多")])])])])}),1)],1)},[],!1,null,"a9d07860",null));_a.options.__file="Wallpapers.vue";var ba=_a.exports,wa="/stock/get",ya="/stock/add",xa="/stock/check",ka="/stock/edit",Ca={name:"stock",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{PushEdit:He,SlickSort:_e,WidgetButton:ye},watch:{activeName:function(t,e){this.activeTabChanged(t)}},data:function(){return this.chartSettings={min:["dataMin"],max:["dataMax"]},{stockData:[],chartData:{rows:[]},latestTime:null,latestRange:0,latestUnitPrice:0,activeName:"",notifyVisible:!1,edit:{title:"",name:"",visible:!1,index:Number,market:"1",code:"",push:!1,min:0,max:0},stockSortEdit:{visible:!1,list:[]}}},methods:{add:function(){this.edit.title="增加股票",this.edit.visible=!0},notify:function(){this.notifyVisible=!this.notifyVisible},sort:function(){this.stockSortEdit.visible=!0,this.stockSortEdit.list=bt(this.stockData)},stockSortEditSetting:function(t,e){console.log(t),this.edit.title="编辑股票",this.edit.market=t.market,this.edit.code=t.code,this.edit.name=t.name,this.edit.push=t.push,this.edit.threshold_min=t.threshold_min,this.edit.threshold_max=t.threshold_max,this.edit.index=e,this.edit.visible=!0},editFormClose:function(){this.edit={title:"",name:"",visible:!1,index:Number,market:"1",code:"",push:!1,threshold_min:0,threshold_max:0}},stockSortEditSubmit:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<t.length;i++)t[i].push=t[i].push?1:0;return a.prev=1,a.next=4,c.a.post(ka,{user_id:e.user_id,stocks:t});case 4:s=a.sent,n=s.data,e.$message({message:n.msg,type:"success"}),e.get(),e.stockSortEdit.visible=!1,a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,e,[[1,11]])}))()},editSubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("增加股票"!=t.edit.title){e.next=17;break}return e.prev=1,e.next=4,c.a.post(ya,{user_id:t.user_id,code:t.edit.code,name:t.edit.name,market:t.edit.market,push:t.edit.push?1:0,threshold_max:t.edit.threshold_max,threshold_min:t.edit.threshold_min});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.get(),t.edit.visible=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:e.next=18;break;case 17:"编辑股票"==t.edit.title&&(s=t.edit.index,t.stockSortEdit.list[s].market=t.edit.market,t.stockSortEdit.list[s].code=t.edit.code,t.stockSortEdit.list[s].name=t.edit.name,t.stockSortEdit.list[s].push=t.edit.push,t.stockSortEdit.list[s].threshold_min=t.edit.threshold_min,t.stockSortEdit.list[s].threshold_max=t.edit.threshold_max,t.edit.visible=!1);case 18:case"end":return e.stop()}},e,t,[[1,11]])}))()},check:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 4==t.edit.market&&-1!=t.edit.code.search(/(([A-Z]([^A-Z]*)?))/g)&&(t.$message({message:"美股代码需为小写字母，已自动修改",type:"info"}),t.edit.code=t.edit.code.toLowerCase()),e.prev=1,e.next=4,c.a.post(xa,{code:t.edit.code,market:t.edit.market});case 4:a=e.sent,""!=(i=a.data).data.name?(t.edit.name=i.data.name,t.$message({message:"校验成功!",type:"success"})):t.$message({message:"校验失败，请检查参数或联系管理员！",type:"error"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 13:case"end":return e.stop()}},e,t,[[1,9]])}))()},activeTabChanged:function(t){for(var e=0;e<this.stockData.length;e++)if(this.stockData[e].name==t){for(var a=[],i=0;i<this.stockData[e].price_list.length;i++)a.push({"时间":this.stockData[e].price_list[i].update_time,"价格":this.stockData[e].price_list[i].price});if(this.chartData={columns:["时间","价格"],rows:a},0!=this.stockData[e].price_list.length){var s=this.stockData[e].price_list.length;this.latestRange=this.stockData[e].price_list[s-1].range,this.latestUnitPrice=this.stockData[e].price_list[s-1].price}return}},get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(wa,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.stockData=i.data,t.chartData={},s=0;s<t.stockData.length;s++)t.stockData[s].market=String(t.stockData[s].market),t.stockData[s].push=1==t.stockData[s].push,null!=t.stockData[s]&&0!=t.stockData[s].length&&(t.stockData[s].threshold_min=t.stockData[s].push_threshold[0],t.stockData[s].threshold_max=t.stockData[s].push_threshold[1]);for(t.activeName=i.data[0].name,n=[],o=0;o<i.data[0].price_list.length;o++)n.push({"时间":i.data[0].price_list[o].update_time,"价格":i.data[0].price_list[o].price});t.chartData={columns:["时间","价格"],rows:n},l=i.data[0].price_list.length,t.latestTime="更新于："+i.data[0].price_list[l-1].update_time,t.latestRange=i.data[0].price_list[l-1].range,t.latestUnitPrice=i.data[0].price_list[l-1].price,t.$nextTick(function(e){for(var a=0;a<t.stockData.length;a++)t.$refs.chart.echarts.resize()}),t.$emit("done"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 24:case"end":return e.stop()}},e,t,[[0,20]])}))()},autoSwitch:function(){window.clearInterval(this.switchTimerStock);for(var t=0;t<this.stockData.length;t++)if(this.stockData[t].name==this.activeName){t+1==this.stockData.length&&(t=-1),this.activeName=this.stockData[t+1].name;break}this.switchTimerStock=window.setTimeout(this.autoSwitch,1e4)}},mounted:function(){this.get(),this.switchTimerStock=window.setTimeout(this.autoSwitch,1e4),this.timer=window.setInterval(this.get,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},Da=Object(u.a)(Ca,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stock-main"},[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.stockData,function(t){return a("el-tab-pane",{key:t,attrs:{label:t.name,name:t.name}})}),1),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:0==t.chartData.rows.length,expression:"chartData.rows.length == 0"}],staticClass:"better_font_style",staticStyle:{width:"98%","font-size":"15px"}},[t._v("\n      暂无数据\n    ")]),t._v(" "),0!=t.chartData.rows.length?a("div",{staticClass:"better_font_style",staticStyle:{"text-align":"left","font-size":"12px"}},[a("span",{staticClass:"margin_right-medium"},[t._v(t._s("单价："+t.latestUnitPrice))]),t._v(" "),a("span",[t._v(" 涨跌幅： ")]),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v(" + ")]):t._e(),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v("\n        "+t._s(t.latestRange)+"\n      ")]):t._e(),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v(" % ")]):t._e(),t._v(" "),t.latestRange<=0?a("span",{staticStyle:{color:"#67c23a"}},[t._v("\n        "+t._s(t.latestRange)+"\n      ")]):t._e(),t._v(" "),t.latestRange<=0?a("span",{staticStyle:{color:"#67c23a"}},[t._v(" % ")]):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.latestTime,placement:"right"}},[a("span",{staticClass:"el-icon-info",staticStyle:{"margin-top":"6px","margin-left":"6px"}})])],1):t._e(),t._v(" "),a("ve-line",{directives:[{name:"show",rawName:"v-show",value:0!=t.chartData.rows.length,expression:"chartData.rows.length != 0"}],ref:"chart",attrs:{height:"215px",settings:t.chartSettings,data:t.chartData,"legend-visible":!1}})],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()},setting:function(e){return t.setting()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:t.notifyVisible,width:"40%"},on:{"update:visible":function(e){t.notifyVisible=e}}},[t.notifyVisible?a("PushEdit",{attrs:{user_id:t.user_id,widget_id:t.widget_id},on:{done:function(e){return t.notify()}}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:t.edit.title,visible:t.edit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},close:function(e){return t.editFormClose()}}},[a("el-form",{ref:"form",attrs:{model:t.edit.form,size:"mini"}},[a("el-form-item",{attrs:{label:"代码"}},[a("div",{staticClass:"div-flex"},[a("el-select",{attrs:{size:"small",placeholder:"请选择市场"},model:{value:t.edit.market,callback:function(e){t.$set(t.edit,"market",e)},expression:"edit.market"}},[a("el-option",{attrs:{label:"SH",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"SZ",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"HK",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"US",value:"4"}})],1),t._v(" "),a("el-input",{attrs:{size:"small",placeholder:"代码"},model:{value:t.edit.code,callback:function(e){t.$set(t.edit,"code",e)},expression:"edit.code"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.check()}}},[t._v("检查")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"名称"},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"推送"}},[a("div",{staticClass:"div-flex"},[a("el-switch",{staticStyle:{"margin-top":"3px"},model:{value:t.edit.push,callback:function(e){t.$set(t.edit,"push",e)},expression:"edit.push"}})],1)]),t._v(" "),t.edit.push?a("el-form-item",{attrs:{label:"当价格不在此范围内时提醒我"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"最小值"},model:{value:t.edit.threshold_min,callback:function(e){t.$set(t.edit,"threshold_min",e)},expression:"edit.threshold_min"}}),t._v("~\n          "),a("el-input",{attrs:{size:"mini",placeholder:"最大值"},model:{value:t.edit.threshold_max,callback:function(e){t.$set(t.edit,"threshold_max",e)},expression:"edit.threshold_max"}})],1)]):t._e(),t._v(" "),t.edit.push?a("p",{staticClass:"warningInfo",staticStyle:{"font-size":"12px",color:"#F56C6C","padding-top":"0px","margin-top":"0px","margin-bottom":"0px"}},[t._v("*设置推送阈值后，需要打开组件的推送总开关（组件下方的推送按钮）才可以正常推送。")]):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editSubmit()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑股票",visible:t.stockSortEdit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.stockSortEdit,"visible",e)}}},[t.stockSortEdit.visible?a("SlickSort",{attrs:{list:t.stockSortEdit.list,can_be_edit:!0},on:{submit:t.stockSortEditSubmit,edit:t.stockSortEditSetting}}):t._e()],1)],1)},[],!1,null,null,null);Da.options.__file="Stock.vue";var Sa=Da.exports,$a="/fund/get",Ea="/fund/add",za="/fund/check",Ta="/fund/edit",Na={name:"fund",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{PushEdit:He,SlickSort:_e,WidgetButton:ye},watch:{activeName:function(t,e){this.activeTabChanged(t)}},data:function(){return this.chartSettings={min:["dataMin"],max:["dataMax"],digit:4},{fundData:[],chartData:{rows:[]},latestTime:null,latestRange:0,latestUnitPrice:0,activeName:"",notifyVisible:!1,edit:{title:"",name:"",visible:!1,index:Number,code:"",push:!1,threshold_min:0,threshold_max:0},fundSortEdit:{visible:!1,list:[]}}},methods:{add:function(){this.edit.title="增加基金",this.edit.visible=!0},notify:function(){this.notifyVisible=!this.notifyVisible},sort:function(){this.fundSortEdit.visible=!0,this.fundSortEdit.list=bt(this.fundData)},fundSortEditSetting:function(t,e){console.log(t),this.edit.title="编辑基金",this.edit.code=t.code,this.edit.name=t.name,this.edit.push=t.push,this.edit.threshold_min=t.threshold_min,this.edit.threshold_max=t.threshold_max,this.edit.index=e,this.edit.visible=!0},editFormClose:function(){this.edit={title:"",name:"",visible:!1,index:Number,code:"",push:!1,min:0,max:0}},fundSortEditSubmit:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<t.length;i++)t[i].push=t[i].push?1:0;return a.prev=1,a.next=4,c.a.post(Ta,{user_id:e.user_id,funds:t});case 4:s=a.sent,n=s.data,e.$message({message:n.msg,type:"success"}),e.get(),e.fundSortEdit.visible=!1,a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,e,[[1,11]])}))()},editSubmit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("增加基金"!=t.edit.title){e.next=17;break}return e.prev=1,e.next=4,c.a.post(Ea,{user_id:t.user_id,code:t.edit.code,name:t.edit.name,push:t.edit.push?1:0,threshold_min:t.edit.threshold_min,threshold_max:t.edit.threshold_max});case 4:a=e.sent,i=a.data,t.$message({message:i.msg,type:"success"}),t.get(),t.edit.visible=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 15:e.next=18;break;case 17:"编辑基金"==t.edit.title&&(s=t.edit.index,t.fundSortEdit.list[s].code=t.edit.code,t.fundSortEdit.list[s].name=t.edit.name,t.fundSortEdit.list[s].push=t.edit.push,t.fundSortEdit.list[s].threshold_min=t.edit.threshold_min,t.fundSortEdit.list[s].threshold_max=t.edit.threshold_max,t.edit.visible=!1);case 18:case"end":return e.stop()}},e,t,[[1,11]])}))()},check:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(za,{code:t.edit.code});case 3:a=e.sent,""!=(i=a.data).data.name?(t.edit.name=i.data.name,t.$message({message:"校验成功!",type:"success"})):t.$message({message:"校验失败，请检查参数或联系管理员！",type:"error"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},activeTabChanged:function(t){for(var e=[],a=0;a<this.fundData.length;a++)if(this.fundData[a].name==t){for(var i=0;i<this.fundData[a].price_list.length;i++)e.push({"时间":this.fundData[a].price_list[i].update_time,"价格":this.fundData[a].price_list[i].price});if(this.chartData={columns:["时间","价格"],rows:e},0!=this.fundData[a].price_list.length){var s=this.fundData[a].price_list.length;this.latestRange=this.fundData[a].price_list[s-1].range,this.latestUnitPrice=this.fundData[a].price_list[s-1].price}return}},get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post($a,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.fundData=i.data,t.chartData={},s=0;s<t.fundData.length;s++)t.fundData[s].push=1==t.fundData[s].push,null!=t.fundData[s]&&0!=t.fundData[s].length&&(t.fundData[s].threshold_min=t.fundData[s].push_threshold[0],t.fundData[s].threshold_max=t.fundData[s].push_threshold[1]);for(t.activeName=i.data[0].name,n=[],o=0;o<i.data[0].price_list.length;o++)n.push({"时间":i.data[0].price_list[o].update_time,"价格":i.data[0].price_list[o].price});t.chartData={columns:["时间","价格"],rows:n},l=i.data[0].price_list.length,t.latestTime="更新于："+i.data[0].price_list[l-1].update_time,t.latestRange=i.data[0].price_list[l-1].range,t.latestUnitPrice=i.data[0].price_list[l-1].price,t.$nextTick(function(e){for(var a=0;a<t.fundData.length;a++)t.$refs.chart.echarts.resize()}),t.$emit("done"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 24:case"end":return e.stop()}},e,t,[[0,20]])}))()},autoSwitch:function(){window.clearInterval(this.switchTimerFund);for(var t=0;t<this.fundData.length;t++)if(this.fundData[t].name==this.activeName){t+1==this.fundData.length&&(t=-1),this.activeName=this.fundData[t+1].name;break}this.switchTimerFund=window.setTimeout(this.autoSwitch,1e4)}},mounted:function(){this.get(),this.switchTimerFund=window.setTimeout(this.autoSwitch,1e4),this.timer=window.setInterval(this.get,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},Fa=Object(u.a)(Na,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fund-main"},[a("el-main",{staticClass:"noPadding",staticStyle:{height:"300px"}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.fundData,function(t){return a("el-tab-pane",{key:t,attrs:{label:t.name,name:t.name}})}),1),t._v(" "),0==t.chartData.rows.length?a("a",{staticClass:"better_font_style",staticStyle:{width:"98%","font-size":"12px"}},[t._v("\n      暂无数据\n    ")]):t._e(),t._v(" "),0!=t.chartData.rows.length?a("div",{staticClass:"better_font_style",staticStyle:{"text-align":"left","font-size":"12px"}},[a("span",{staticClass:"margin_right-medium"},[t._v(t._s("单价："+t.latestUnitPrice))]),t._v(" "),a("span",[t._v(" 涨跌幅： ")]),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v(" + ")]):t._e(),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v("\n        "+t._s(t.latestRange)+"\n      ")]):t._e(),t._v(" "),t.latestRange>0?a("span",{staticStyle:{color:"#f56c6c"}},[t._v(" % ")]):t._e(),t._v(" "),t.latestRange<=0?a("span",{staticStyle:{color:"#67c23a"}},[t._v("\n        "+t._s(t.latestRange)+"\n      ")]):t._e(),t._v(" "),t.latestRange<=0?a("span",{staticStyle:{color:"#67c23a"}},[t._v(" % ")]):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.latestTime,placement:"right"}},[a("span",{staticClass:"el-icon-info",staticStyle:{"margin-top":"6px","margin-left":"6px"}})])],1):t._e(),t._v(" "),0!=t.chartData.rows.length?a("ve-line",{ref:"chart",attrs:{height:"215px",settings:t.chartSettings,data:t.chartData,"legend-visible":!1}}):t._e()],1),t._v(" "),0!=t.user_id?a("el-footer",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{height:"31px"}},[a("WidgetButton",{attrs:{user_id:t.user_id,widget_id:t.widget_id,buttons:t.buttons},on:{add:function(e){return t.add()},sort:function(e){return t.sort()},notify:function(e){return t.notify()},setting:function(e){return t.setting()}}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:t.notifyVisible,width:"40%"},on:{"update:visible":function(e){t.notifyVisible=e}}},[t.notifyVisible?a("PushEdit",{attrs:{user_id:t.user_id,widget_id:t.widget_id},on:{done:function(e){return t.notify()}}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:t.edit.title,visible:t.edit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.edit,"visible",e)},close:function(e){return t.editFormClose()}}},[a("el-form",{ref:"form",attrs:{model:t.edit.form,size:"mini"}},[a("el-form-item",{attrs:{label:"代码"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"代码"},model:{value:t.edit.code,callback:function(e){t.$set(t.edit,"code",e)},expression:"edit.code"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(e){return t.check()}}},[t._v("检查")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"名称"},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"推送"}},[a("div",{staticClass:"div-flex"},[a("el-switch",{staticStyle:{"margin-top":"3px"},model:{value:t.edit.push,callback:function(e){t.$set(t.edit,"push",e)},expression:"edit.push"}})],1)]),t._v(" "),t.edit.push?a("el-form-item",{attrs:{label:"当价格不在此范围内时提醒我"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"最小值"},model:{value:t.edit.threshold_min,callback:function(e){t.$set(t.edit,"threshold_min",e)},expression:"edit.threshold_min"}}),t._v("~\n          "),a("el-input",{attrs:{size:"mini",placeholder:"最大值"},model:{value:t.edit.threshold_max,callback:function(e){t.$set(t.edit,"threshold_max",e)},expression:"edit.threshold_max"}})],1)]):t._e(),t._v(" "),t.edit.push?a("p",{staticClass:"warningInfo",staticStyle:{"font-size":"12px",color:"#f56c6c","padding-top":"0px","margin-top":"0px","margin-bottom":"0px"}},[t._v("\n        *设置推送阈值后，需要打开组件的推送总开关（组件下方的推送按钮）才可以正常推送。\n      ")]):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.editSubmit()}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑基金",visible:t.fundSortEdit.visible,width:"40%"},on:{"update:visible":function(e){return t.$set(t.fundSortEdit,"visible",e)}}},[t.fundSortEdit.visible?a("SlickSort",{attrs:{list:t.fundSortEdit.list,can_be_edit:!0},on:{submit:t.fundSortEditSubmit,edit:t.fundSortEditSetting}}):t._e()],1)],1)},[],!1,null,null,null);Fa.options.__file="Fund.vue";var Ma=Fa.exports,Ia="/news/flush",Oa={name:"newsModule",props:{newsData:{}},watch:{newsData:function(t,e){this.init()}},data:function(){return{loading:!1,newsDataCategory:"",newsDataShow:{data:[]}}},methods:{init:function(){this.newsDataCategory=this.newsData.choose,this.newsDataShow=bt(this.newsData.show),this.$emit("done")},categoryChoosed:function(t){for(var e=0;e<this.newsData.data.length;e++)if(this.newsData.data[e].title==t)return void(this.newsDataShow=bt(this.newsData.data[e]))},newsFlush:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loading=!0,a="",i=0;case 3:if(!(i<t.newsData.data.length)){e.next=10;break}if(t.newsData.data[i].title!=t.newsDataCategory){e.next=7;break}return a=t.newsData.data[i].website,e.abrupt("break",10);case 7:i++,e.next=3;break;case 10:return e.prev=10,e.next=13,c.a.post(Ia,{target:a,token:t.$cookies.get("csrf_token")});case 13:for(s=e.sent,n=s.data,t.newsData.data=n.data,t.newsData.choose=n.data[0].title,t.newsData.show=bt(n.data[0]),t.newsData.chooseItems=[],o=0;o<n.data.length;o++)t.newsData.chooseItems.push(n.data[o].title);t.init(),t.loading=!1,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(10),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"}),t.loading=!1;case 29:case"end":return e.stop()}},e,t,[[10,24]])}))()}},mounted:function(){this.init()}},Pa=Object(u.a)(Oa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",{staticClass:"margin_bottom-medium"},[a("div",{staticClass:"div-flex"},[a("div",{staticStyle:{"text-align":"left","flex-grow":"1","font-weight":"bold",cursor:"pointer"},on:{click:function(e){return t.newsFlush()}}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击刷新",placement:"top","open-delay":"500",enterable:!1}},[a("span",[t._v(t._s(t.newsData.title))])])],1),t._v(" "),t.newsData.chooseItems.length>1?a("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){return t.categoryChoosed(t.newsDataCategory)}},model:{value:t.newsDataCategory,callback:function(e){t.newsDataCategory=e},expression:"newsDataCategory"}},t._l(t.newsData.chooseItems,function(t){return a("el-radio-button",{key:t,attrs:{id:t,label:t}})}),1):t._e()],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"left"}},[t.newsDataShow.data.length>0?a("div",{staticClass:"scrollbar-div",staticStyle:{height:"300px"}},t._l(t.newsDataShow.data,function(e,i){return a("div",{key:e,staticClass:"margin_bottom-mini margin_right-small"},[a("el-link",{staticStyle:{color:"#606266"},attrs:{type:"primary",href:e.url,target:"_blank",underline:!1}},[t._v(t._s(i+1+"."+e.name)+"\n        ")]),t._v(" "),a("br")],1)}),0):t._e(),t._v(" "),0==t.newsDataShow.data.length?a("div",{staticClass:"better_font_style",staticStyle:{"margin-top":"15px","text-align":"left","font-size":"14px",color:"#606266"}},[t._v("\n      源站访问失败（宕机或限制），请稍后再试\n    ")]):t._e()]),t._v(" "),a("div",{staticClass:"better_font_style",staticStyle:{"margin-top":"15px","text-align":"right","font-size":"12px",color:"#909399"}},[t._v("\n    "+t._s("更新时间："+t.newsDataShow.time)+"\n  ")])],1)},[],!1,null,null,null);Pa.options.__file="NewsModule.vue";var La=Pa.exports,Ra="/news/get",Aa={name:"news",props:{flush:Number},components:{newsModule:La},watch:{},data:function(){return{rawData:[],cookedData:{}}},methods:{done:function(){this.$emit("done")},get:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,l,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Ra,{token:t.$cookies.get("csrf_token")});case 3:for(a=e.sent,i=a.data,t.rawData=i.data,s=4,o=0,(n=[]).push([]),n[n.length-1]=[],l=0;l<t.rawData.length;l++){for(t.rawData[l].choose=t.rawData[l].data[0].title,t.rawData[l].show=bt(t.rawData[l].data[0]),t.rawData[l].chooseItems=[],d=0;d<t.rawData[l].data.length;d++)t.rawData[l].chooseItems.push(t.rawData[l].data[d].title);o<s?o+=1:(o=0,n.push([]),n[n.length-1]=[],o+=1),n[n.length-1].push(t.rawData[l])}t.cookedData=n,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 19:case"end":return e.stop()}},e,t,[[0,15]])}))()}},mounted:function(){this.get(),this.timer=window.setInterval(this.get,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},Ga=Object(u.a)(Aa,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",t._l(t.cookedData,function(e){return a("el-row",{key:e,attrs:{gutter:20}},t._l(e,function(e){return a("el-col",{key:e,attrs:{span:6}},[a("el-card",{staticClass:"margin_bottom-medium",attrs:{shadow:"hover"}},[a("newsModule",{attrs:{newsData:e},on:{done:function(e){return t.done()}}})],1)],1)}),1)}),1)},[],!1,null,null,null);Ga.options.__file="News.vue";var Wa=Ga.exports,Ba="/widget/get",Va="/widget/suite/get",ja={name:"widgets",props:{user_id:Number},components:{weather:Te,bookmarks:We,appMonitor:Qe,gold:sa,notes:ua,translator:ga,wallpapers:ba,stock:Sa,fund:Ma,news:Wa},watch:{user_id:function(t,e){this.widgetSuiteLabelGet()}},data:function(){return{widgetSuiteLabelActiveName:"",widgetSuiteLabels:[],widgetSuite:[],widget:[]}},methods:{widgetSuiteLabelGet:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(Va,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.widgetSuiteLabels=i.data,s=0;s<t.widgetSuiteLabels.length;s++)t.widgetSuiteLabels[s].id=String(t.widgetSuiteLabels[s].id);0!=t.widgetSuiteLabels.length&&(t.widgetSuiteLabelActiveName=t.widgetSuiteLabels[0].id,t.widgetGet(t.widgetSuiteLabels[0].id)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()},handleClick:function(t){this.widgetGet(t.name)},widgetGet:function(t){var e=this;return l()(r.a.mark(function a(){var i,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.post(Ba,{user_id:e.user_id,widget_suite_id:Number(t)});case 3:for(i=a.sent,s=i.data,n=0;n<s.data.length;n++)s.data[n].show=!1,s.data[n].flush=!1;return e.widget=s.data,a.next=9,e.widgetSuiteGenerate();case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),e.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,e,[[0,11]])}))()},widgetSuiteGenerate:function(){var t=0;this.widgetSuite=[],this.widgetSuite.push([]);for(var e=0;e<this.widget.length;e++)(t+=this.widget[e].span)>24&&(this.widgetSuite.push([]),t=0,t+=this.widget[e].span),this.widgetSuite[this.widgetSuite.length-1].push(this.widget[e])},done:function(t,e){this.widgetSuite[t][e].show=!0,this.widgetSuite[t][e].flush=!1}},mounted:function(){this.widgetSuiteLabelGet()}},Ua=Object(u.a)(ja,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.widgetSuiteLabels.length>1?a("el-tabs",{staticStyle:{"padding-bottom":"30px",width:"70%","text-align":"center",margin:"0 auto"},attrs:{stretch:"true"},on:{"tab-click":t.handleClick},model:{value:t.widgetSuiteLabelActiveName,callback:function(e){t.widgetSuiteLabelActiveName=e},expression:"widgetSuiteLabelActiveName"}},t._l(t.widgetSuiteLabels,function(t){return a("el-tab-pane",{key:t,attrs:{label:t.name,name:t.id}})}),1):t._e(),t._v(" "),t._l(t.widgetSuite,function(e,i){return a("el-row",{key:e,staticClass:"margin_bottom-large"},t._l(e,function(e,s){return a("el-col",{key:e,attrs:{span:e.span}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"singleWidget.show"}],staticClass:"margin_left-medium margin_right-medium",attrs:{shadow:"hover"}},["weather"==e.name?a("weather",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"bookmarks"==e.name?a("bookmarks",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"app"==e.name?a("appMonitor",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"gold"==e.name?a("gold",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"notes"==e.name?a("notes",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"translator"==e.name?a("translator",{staticStyle:{height:"330px"},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"wallpapers"==e.name?a("wallpapers",{staticStyle:{height:"330px"},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"stock"==e.name?a("stock",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"fund"==e.name?a("fund",{staticStyle:{height:"330px"},attrs:{user_id:t.user_id,widget_id:e.id,buttons:e.buttons,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e(),t._v(" "),"news"==e.name?a("news",{attrs:{user_id:t.user_id,widget_id:e.id,flush:e.auto_update},on:{done:function(e){return t.done(i,s)}}}):t._e()],1)],1)],1)}),1)})],2)},[],!1,null,null,null);Ua.options.__file="Widgets.vue";var qa="/userInfo",Ha={components:{githubConner:m,search:h,login:ge,widgets:Ua.exports},data:function(){return{initial:!1,user_id:0,widget:[],widgetSuite:[],flush:!1,activeName:"second"}},methods:{userInfo:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.post(qa,{user_id:t.user_id});case 3:a=e.sent,i=a.data,t.$cookies.set("csrf_token",i.data.csrf_token),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),401==e.t0.response.status?(t.$cookies.remove("user_key"),t.$cookies.remove("user_name"),t.$cookies.remove("user_id"),t.$cookies.remove("login_name")):403==e.t0.response.status?console.log(e.t0.response.data.msg):t.$message({message:e.t0.response.data.msg,type:"error"});case 11:return e.next=13,t.userIdFlush();case 13:t.initial=!0;case 14:case"end":return e.stop()}},e,t,[[0,8]])}))()},userIdFlush:function(){try{this.user_name=null==this.$cookies.get("user_name")?"":this.$cookies.get("user_name"),this.user_id=null==this.$cookies.get("user_id")?0:this.$cookies.get("user_id"),this.login_name=null==this.$cookies.get("login_name")?"":this.$cookies.get("login_name")}catch(t){this.user_name="",this.user_id=0,this.login_name=""}}},created:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.userIdFlush();case 2:case"end":return e.stop()}},e,t)}))()},mounted:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.userInfo();case 2:case"end":return e.stop()}},e,t)}))()}},Ka=(a("A0++"),Object(u.a)(Ha,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.initial?a("div",{attrs:{id:"app"}},[a("githubConner"),t._v(" "),a("el-row",{staticClass:"loginRow"},[a("login",{attrs:{user_id:t.user_id,user_name:t.user_name,login_name:t.login_name}})],1),t._v(" "),a("el-row",{staticClass:"searchRow"},[a("search",{attrs:{user_id:t.user_id}})],1),t._v(" "),a("div",{staticClass:"cardRow"},[a("widgets",{attrs:{user_id:t.user_id}})],1)],1):t._e()},[],!1,null,null,null));Ka.options.__file="App.vue";var Ya=Ka.exports,Xa=(a("Af8c"),a("jE9Z"));i.default.use(Xa.a);var Ja=new Xa.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[]}),Za=a("KBne"),Qa=a.n(Za),ti=a("XJYT"),ei=a.n(ti),ai=a("Kyfw"),ii=a.n(ai),si=(a("vjVy"),a("TrUB")),ni=a.n(si);a("D66Q"),a("H1Ta");i.default.use(s.a),i.default.use(Qa.a),i.default.use(ei.a),i.default.use(ii.a),i.default.use(ni.a),new i.default({router:Ja,el:"#app",render:function(t){return t(Ya)}})},XX29:function(t,e,a){"use strict";var i=a("ZfFZ");a.n(i).a},YNnd:function(t,e,a){},YOjG:function(t,e,a){"use strict";var i=a("wFC7");a.n(i).a},YV7q:function(t,e,a){"use strict";var i=a("g18E");a.n(i).a},ZEOG:function(t,e,a){"use strict";var i=a("Hkxj");a.n(i).a},ZfFZ:function(t,e,a){},fErA:function(t,e,a){},g18E:function(t,e,a){},i7fK:function(t,e,a){},oH1l:function(t,e,a){"use strict";var i=a("JBGY");a.n(i).a},oNX8:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14Xm"),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("D3Ub"),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__),js_md5__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("gjeX"),js_md5__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(js_md5__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zuR4"),default_suggest_url="https://suggestion.baidu.com/su?wd=%word%&cb=window.baidu.sug",default_suggest_func="window.baidu={sug:function(json){cb(json.s.map(function(x){return{'value':x}}))}}",api={searchEngines:"/search/searchEngines",searchLog:"/search/searchLog"};__webpack_exports__.a={name:"search",props:{user_id:Number},data:function(){return{word:"",searchIcon:"search-icon el-icon-search",searchEngines:{select:"",select_engine_id:0,main_url:"",suggest_url:"",suggest_func:"",options:[]}}},methods:{searchEnginesChanged:function(){for(var t=0;t<this.searchEngines.options.length;t++)if(this.searchEngines.select==this.searchEngines.options[t].value)return this.searchEngines.select_engine_id=this.searchEngines.options[t].id,this.searchEngines.main_url=this.searchEngines.options[t].main_url,this.searchEngines.suggest_url=this.searchEngines.options[t].suggest_url,this.searchEngines.suggest_func=this.searchEngines.options[t].suggest_func,void(this.searchIcon=this.searchEngines.options[t].icon)},searchEnginesGet:function(){var t=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){var a,i,s,n,r;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios__WEBPACK_IMPORTED_MODULE_3__.a.get(api.searchEngines);case 3:for(a=e.sent,i=a.data,s=0;s<i.data.length;s++)n=default_suggest_url,r=default_suggest_func,js_md5__WEBPACK_IMPORTED_MODULE_2___default()(i.data[s].suggest_func)==i.data[s].s&&(n=i.data[s].suggest_url,r=i.data[s].suggest_func),t.searchEngines.options.push({id:i.data[s].id,main_url:i.data[s].main_url,suggest_url:n,suggest_func:r,icon:i.data[s].icon,label:i.data[s].name,value:i.data[s].name});t.searchEngines.select=t.searchEngines.options[0].value,t.searchEngines.select_engine_id=t.searchEngines.options[0].id,t.searchEngines.main_url=t.searchEngines.options[0].main_url,t.searchEngines.suggest_url=t.searchEngines.options[0].suggest_url,t.searchEngines.suggest_func=t.searchEngines.options[0].suggest_func,t.searchIcon=t.searchEngines.options[0].icon,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 18:case"end":return e.stop()}},e,t,[[0,14]])}))()},search:function(){var t=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function e(){var a,i;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchEngines.main_url.replace("%word%",t.word),window.open(a),t.autoComplete(""),e.prev=3,e.next=6,axios__WEBPACK_IMPORTED_MODULE_3__.a.post(api.searchLog,{user_id:t.user_id,engine_id:t.searchEngines.select_engine_id,search_text:t.word});case 6:i=e.sent,i.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:t.word="";case 14:case"end":return e.stop()}},e,t,[[3,10]])}))()},autoComplete:function autoComplete(queryString,cb){var _this3=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(){var autoCompleteUrl,script;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(""===queryString||queryString===[]||void 0===queryString)try{cb([])}catch(t){}else{autoCompleteUrl=_this3.searchEngines.suggest_url.replace("%word%",_this3.word);try{script=document.createElement("script"),script.src=autoCompleteUrl,eval(_this3.searchEngines.suggest_func),document.querySelector("head").appendChild(script),document.querySelector("head").removeChild(script)}catch(t){console.log(t),_this3.$message({message:t.response.data.msg,type:"error"})}}case 1:case"end":return _context3.stop()}},_callee3,_this3)}))()}},created:function(){this.searchEnginesGet()},mounted:function(){this.$refs.input.focus()}}},ovKT:function(t,e,a){},qWpc:function(t,e,a){},tKpc:function(t,e,a){},uKoy:function(t,e,a){"use strict";var i=a("9gQr");a.n(i).a},uhPh:function(t,e,a){},v4Th:function(t,e,a){},vjVy:function(t,e,a){},wFC7:function(t,e,a){},xUNX:function(t,e,a){},yJpf:function(t,e,a){"use strict";var i=a("0py1");a.n(i).a},zs3P:function(t,e,a){"use strict";var i=a("fErA");a.n(i).a}},[["Vtdi","runtime","chunk-elementUI","chunk-libs"]]]);